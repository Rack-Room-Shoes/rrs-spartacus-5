/*
 * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component, Optional } from '@angular/core';
import { BREAKPOINT } from '@spartacus/storefront';
import { EMPTY } from 'rxjs';
import { map, take } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../shared/utils/common-configurator-utils.service";
import * as i2 from "./configurator-cart-entry-bundle-info.service";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@spartacus/core";
import * as i5 from "@spartacus/cart/base/root";
import * as i6 from "@angular/common";
import * as i7 from "../configure-cart-entry/configure-cart-entry.component";
/**
 * Requires default change detection strategy, as the disabled state of the quantity from control may change,
 * which would not be proper detected with onPush strategy.
 */
export class ConfiguratorCartEntryBundleInfoComponent {
    constructor(commonConfigUtilsService, configCartEntryBundleInfoService, breakpointService, translation, cartItemContext) {
        this.commonConfigUtilsService = commonConfigUtilsService;
        this.configCartEntryBundleInfoService = configCartEntryBundleInfoService;
        this.breakpointService = breakpointService;
        this.translation = translation;
        this.cartItemContext = cartItemContext;
        this.orderEntry$ = this.cartItemContext?.item$ ?? EMPTY;
        this.quantityControl$ = this.cartItemContext?.quantityControl$ ?? EMPTY;
        this.readonly$ = this.cartItemContext?.readonly$ ?? EMPTY;
        this.hideItems = true;
        this.lineItems$ = this.orderEntry$.pipe(map((entry) => this.configCartEntryBundleInfoService.retrieveLineItems(entry)));
        this.numberOfLineItems$ = this.lineItems$.pipe(map((items) => items.length));
        // TODO: remove the logic below when configurable products support "Saved Cart" and "Save For Later"
        this.shouldShowButton$ = this.commonConfigUtilsService.isActiveCartContext(this.cartItemContext);
    }
    /**
     * Toggles the state of the items list.
     */
    toggleItems() {
        this.hideItems = !this.hideItems;
    }
    /**
     * Verifies whether the configurator type is a bundle based one.
     *
     * @param {OrderEntry} entry - Order entry
     * @returns {boolean} - 'true' if the expected configurator type, otherwise 'false'
     */
    isBundleBasedConfigurator(entry) {
        const configInfos = entry.configurationInfos;
        return configInfos
            ? this.commonConfigUtilsService.isBundleBasedConfigurator(configInfos[0]?.configuratorType)
            : false;
    }
    /**
     * Verifies whether the current screen size equals or is larger than breakpoint `BREAKPOINT.md`.
     *
     * @deprecated since 5.0 - method not used anymore
     * @returns {Observable<boolean>} - If the given breakpoint equals or is larger than`BREAKPOINT.md` returns `true`, otherwise `false`.
     */
    isDesktop() {
        return this.breakpointService.isUp(BREAKPOINT.md);
    }
    getButtonText(translatedText) {
        if (!translatedText) {
            translatedText = '';
        }
        if (this.hideItems) {
            this.translation
                .translate('configurator.header.show')
                .pipe(take(1))
                .subscribe((text) => (translatedText += text));
        }
        else {
            this.translation
                .translate('configurator.header.hide')
                .pipe(take(1))
                .subscribe((text) => (translatedText += text));
        }
        return translatedText;
    }
    getItemsMsg(items) {
        let translatedText = '';
        this.translation
            .translate('configurator.a11y.cartEntryBundleInfo', { items: items })
            .pipe(take(1))
            .subscribe((text) => (translatedText = text));
        return this.getButtonText(translatedText);
    }
    getHiddenItemInfo(item) {
        let translatedText = '';
        if (item.name && item.formattedPrice && item.formattedQuantity) {
            this.translation
                .translate('configurator.a11y.cartEntryBundle', {
                name: item.name,
                price: item.formattedPrice,
                quantity: item.formattedQuantity,
            })
                .pipe(take(1))
                .subscribe((text) => (translatedText = text));
        }
        else if (item.name && item.formattedPrice) {
            this.translation
                .translate('configurator.a11y.cartEntryBundleNameWithPrice', {
                name: item.name,
                price: item.formattedPrice,
            })
                .pipe(take(1))
                .subscribe((text) => (translatedText = text));
        }
        else if (item.name && item.formattedQuantity) {
            this.translation
                .translate('configurator.a11y.cartEntryBundleNameWithQuantity', {
                name: item.name,
                quantity: item.formattedQuantity,
            })
                .pipe(take(1))
                .subscribe((text) => (translatedText = text));
        }
        else {
            this.translation
                .translate('configurator.a11y.cartEntryBundleName', {
                name: item.name,
            })
                .pipe(take(1))
                .subscribe((text) => (translatedText = text));
        }
        return translatedText;
    }
    getHiddenItemInfoId(index) {
        return 'cx-item-hidden-info-' + index.toString();
    }
}
ConfiguratorCartEntryBundleInfoComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.3", ngImport: i0, type: ConfiguratorCartEntryBundleInfoComponent, deps: [{ token: i1.CommonConfiguratorUtilsService }, { token: i2.ConfiguratorCartEntryBundleInfoService }, { token: i3.BreakpointService }, { token: i4.TranslationService }, { token: i5.CartItemContext, optional: true }], target: i0.ɵɵFactoryTarget.Component });
ConfiguratorCartEntryBundleInfoComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.3", type: ConfiguratorCartEntryBundleInfoComponent, selector: "cx-configurator-cart-entry-bundle-info", ngImport: i0, template: "<ng-container *ngIf=\"orderEntry$ | async as orderEntry\">\n  <ng-container *ngIf=\"isBundleBasedConfigurator(orderEntry)\">\n    <ng-container *ngIf=\"numberOfLineItems$ | async as numberOfItems\">\n      <div class=\"cx-number-items\">\n        {{\n          'configurator.header.items' | cxTranslate: { count: numberOfItems }\n        }}\n      </div>\n      <button\n        (click)=\"toggleItems()\"\n        [attr.aria-expanded]=\"!this.hideItems\"\n        [attr.aria-label]=\"getItemsMsg(numberOfItems)\"\n      >\n        <div class=\"cx-toggle-hide-items\">\n          {{ getButtonText() }}\n        </div>\n      </button>\n\n      <div class=\"cx-item-infos\" [class.open]=\"!hideItems\">\n        <div\n          *ngFor=\"let lineItem of lineItems$ | async; let i = index\"\n          class=\"cx-item-info\"\n          attr.aria-describedby=\"{{ getHiddenItemInfoId(i) }}\"\n        >\n          <span id=\"{{ getHiddenItemInfoId(i) }}\" class=\"cx-visually-hidden\">\n            {{ getHiddenItemInfo(lineItem) }}\n          </span>\n          <div class=\"cx-item-name\" aria-hidden=\"true\">\n            {{ lineItem?.name }}\n          </div>\n          <div class=\"cx-item-quantity\" aria-hidden=\"true\">\n            <ng-container *ngIf=\"lineItem?.formattedQuantity\">\n              <span class=\"cx-identifier\">{{\n                'configurator.attribute.quantity' | cxTranslate\n              }}</span>\n              <span class=\"cx-item\">{{\n                lineItem?.formattedQuantity | cxNumeric\n              }}</span>\n            </ng-container>\n          </div>\n          <div class=\"cx-item-price\" aria-hidden=\"true\">\n            <ng-container *ngIf=\"lineItem?.formattedPrice\">\n              <span class=\"cx-identifier\">{{\n                'configurator.overviewForm.itemPrice' | cxTranslate\n              }}</span>\n              <span class=\"cx-item\">{{ lineItem?.formattedPrice }}</span>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <cx-configure-cart-entry\n      *ngIf=\"\n        (shouldShowButton$ | async) &&\n          orderEntry?.product?.configurable &&\n          quantityControl$ | async as quantityControl\n      \"\n      [cartEntry]=\"orderEntry\"\n      [readOnly]=\"readonly$ | async\"\n      [msgBanner]=\"false\"\n      [disabled]=\"quantityControl.disabled\"\n    ></cx-configure-cart-entry>\n  </ng-container>\n</ng-container>\n", dependencies: [{ kind: "directive", type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i7.ConfigureCartEntryComponent, selector: "cx-configure-cart-entry", inputs: ["cartEntry", "readOnly", "msgBanner", "disabled"] }, { kind: "pipe", type: i6.AsyncPipe, name: "async" }, { kind: "pipe", type: i4.TranslatePipe, name: "cxTranslate" }, { kind: "pipe", type: i4.CxNumericPipe, name: "cxNumeric" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.3", ngImport: i0, type: ConfiguratorCartEntryBundleInfoComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-configurator-cart-entry-bundle-info', template: "<ng-container *ngIf=\"orderEntry$ | async as orderEntry\">\n  <ng-container *ngIf=\"isBundleBasedConfigurator(orderEntry)\">\n    <ng-container *ngIf=\"numberOfLineItems$ | async as numberOfItems\">\n      <div class=\"cx-number-items\">\n        {{\n          'configurator.header.items' | cxTranslate: { count: numberOfItems }\n        }}\n      </div>\n      <button\n        (click)=\"toggleItems()\"\n        [attr.aria-expanded]=\"!this.hideItems\"\n        [attr.aria-label]=\"getItemsMsg(numberOfItems)\"\n      >\n        <div class=\"cx-toggle-hide-items\">\n          {{ getButtonText() }}\n        </div>\n      </button>\n\n      <div class=\"cx-item-infos\" [class.open]=\"!hideItems\">\n        <div\n          *ngFor=\"let lineItem of lineItems$ | async; let i = index\"\n          class=\"cx-item-info\"\n          attr.aria-describedby=\"{{ getHiddenItemInfoId(i) }}\"\n        >\n          <span id=\"{{ getHiddenItemInfoId(i) }}\" class=\"cx-visually-hidden\">\n            {{ getHiddenItemInfo(lineItem) }}\n          </span>\n          <div class=\"cx-item-name\" aria-hidden=\"true\">\n            {{ lineItem?.name }}\n          </div>\n          <div class=\"cx-item-quantity\" aria-hidden=\"true\">\n            <ng-container *ngIf=\"lineItem?.formattedQuantity\">\n              <span class=\"cx-identifier\">{{\n                'configurator.attribute.quantity' | cxTranslate\n              }}</span>\n              <span class=\"cx-item\">{{\n                lineItem?.formattedQuantity | cxNumeric\n              }}</span>\n            </ng-container>\n          </div>\n          <div class=\"cx-item-price\" aria-hidden=\"true\">\n            <ng-container *ngIf=\"lineItem?.formattedPrice\">\n              <span class=\"cx-identifier\">{{\n                'configurator.overviewForm.itemPrice' | cxTranslate\n              }}</span>\n              <span class=\"cx-item\">{{ lineItem?.formattedPrice }}</span>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <cx-configure-cart-entry\n      *ngIf=\"\n        (shouldShowButton$ | async) &&\n          orderEntry?.product?.configurable &&\n          quantityControl$ | async as quantityControl\n      \"\n      [cartEntry]=\"orderEntry\"\n      [readOnly]=\"readonly$ | async\"\n      [msgBanner]=\"false\"\n      [disabled]=\"quantityControl.disabled\"\n    ></cx-configure-cart-entry>\n  </ng-container>\n</ng-container>\n" }]
        }], ctorParameters: function () { return [{ type: i1.CommonConfiguratorUtilsService }, { type: i2.ConfiguratorCartEntryBundleInfoService }, { type: i3.BreakpointService }, { type: i4.TranslationService }, { type: i5.CartItemContext, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdG9yLWNhcnQtZW50cnktYnVuZGxlLWluZm8uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL2NvbW1vbi9jb21wb25lbnRzL2NvbmZpZ3VyYXRvci1jYXJ0LWVudHJ5LWJ1bmRsZS1pbmZvL2NvbmZpZ3VyYXRvci1jYXJ0LWVudHJ5LWJ1bmRsZS1pbmZvLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9wcm9kdWN0LWNvbmZpZ3VyYXRvci9jb21tb24vY29tcG9uZW50cy9jb25maWd1cmF0b3ItY2FydC1lbnRyeS1idW5kbGUtaW5mby9jb25maWd1cmF0b3ItY2FydC1lbnRyeS1idW5kbGUtaW5mby5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJcEQsT0FBTyxFQUFFLFVBQVUsRUFBcUIsTUFBTSx1QkFBdUIsQ0FBQztBQUN0RSxPQUFPLEVBQUUsS0FBSyxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7OztBQUszQzs7O0dBR0c7QUFLSCxNQUFNLE9BQU8sd0NBQXdDO0lBQ25ELFlBQ1ksd0JBQXdELEVBQ3hELGdDQUF3RSxFQUN4RSxpQkFBb0MsRUFDcEMsV0FBK0IsRUFDbkIsZUFBaUM7UUFKN0MsNkJBQXdCLEdBQXhCLHdCQUF3QixDQUFnQztRQUN4RCxxQ0FBZ0MsR0FBaEMsZ0NBQWdDLENBQXdDO1FBQ3hFLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDcEMsZ0JBQVcsR0FBWCxXQUFXLENBQW9CO1FBQ25CLG9CQUFlLEdBQWYsZUFBZSxDQUFr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QUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ2pEO2FBQU07WUFDTCxJQUFJLENBQUMsV0FBVztpQkFDYixTQUFTLENBQUMsdUNBQXVDLEVBQUU7Z0JBQ2xELElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTthQUNoQixDQUFDO2lCQUNELElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ2IsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ2pEO1FBRUQsT0FBTyxjQUFjLENBQUM7SUFDeEIsQ0FBQztJQUVELG1CQUFtQixDQUFDLEtBQWE7UUFDL0IsT0FBTyxzQkFBc0IsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbkQsQ0FBQzs7cUlBeklVLHdDQUF3Qzt5SEFBeEMsd0NBQXdDLDhFQ3pCckQsKzVFQWdFQTsyRkR2Q2Esd0NBQXdDO2tCQUpwRCxTQUFTOytCQUNFLHdDQUF3Qzs7MEJBUy9DLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMiBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBVbnR5cGVkRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBDYXJ0SXRlbUNvbnRleHQsIE9yZGVyRW50cnkgfSBmcm9tICdAc3BhcnRhY3VzL2NhcnQvYmFzZS9yb290JztcbmltcG9ydCB7IFRyYW5zbGF0aW9uU2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQgeyBCUkVBS1BPSU5ULCBCcmVha3BvaW50U2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBFTVBUWSwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCB0YWtlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ29tbW9uQ29uZmlndXJhdG9yVXRpbHNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzL2NvbW1vbi1jb25maWd1cmF0b3ItdXRpbHMuc2VydmljZSc7XG5pbXBvcnQgeyBMaW5lSXRlbSB9IGZyb20gJy4vY29uZmlndXJhdG9yLWNhcnQtZW50cnktYnVuZGxlLWluZm8ubW9kZWwnO1xuaW1wb3J0IHsgQ29uZmlndXJhdG9yQ2FydEVudHJ5QnVuZGxlSW5mb1NlcnZpY2UgfSBmcm9tICcuL2NvbmZpZ3VyYXRvci1jYXJ0LWVudHJ5LWJ1bmRsZS1pbmZvLnNlcnZpY2UnO1xuXG4vKipcbiAqIFJlcXVpcmVzIGRlZmF1bHQgY2hhbmdlIGRldGVjdGlvbiBzdHJhdGVneSwgYXMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBxdWFudGl0eSBmcm9tIGNvbnRyb2wgbWF5IGNoYW5nZSxcbiAqIHdoaWNoIHdvdWxkIG5vdCBiZSBwcm9wZXIgZGV0ZWN0ZWQgd2l0aCBvblB1c2ggc3RyYXRlZ3kuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2N4LWNvbmZpZ3VyYXRvci1jYXJ0LWVudHJ5LWJ1bmRsZS1pbmZvJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2NvbmZpZ3VyYXRvci1jYXJ0LWVudHJ5LWJ1bmRsZS1pbmZvLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdG9yQ2FydEVudHJ5QnVuZGxlSW5mb0NvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBjb21tb25Db25maWdVdGlsc1NlcnZpY2U6IENvbW1vbkNvbmZpZ3VyYXRvclV0aWxzU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY29uZmlnQ2FydEVudHJ5QnVuZGxlSW5mb1NlcnZpY2U6IENvbmZpZ3VyYXRvckNhcnRFbnRyeUJ1bmRsZUluZm9TZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBicmVha3BvaW50U2VydmljZTogQnJlYWtwb2ludFNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvblNlcnZpY2UsXG4gICAgQE9wdGlvbmFsKCkgcHJvdGVjdGVkIGNhcnRJdGVtQ29udGV4dD86IENhcnRJdGVtQ29udGV4dFxuICApIHt9XG5cbiAgcmVhZG9ubHkgb3JkZXJFbnRyeSQ6IE9ic2VydmFibGU8T3JkZXJFbnRyeT4gPVxuICAgIHRoaXMuY2FydEl0ZW1Db250ZXh0Py5pdGVtJCA/PyBFTVBUWTtcblxuICByZWFkb25seSBxdWFudGl0eUNvbnRyb2wkOiBPYnNlcnZhYmxlPFVudHlwZWRGb3JtQ29udHJvbD4gPVxuICAgIHRoaXMuY2FydEl0ZW1Db250ZXh0Py5xdWFudGl0eUNvbnRyb2wkID8/IEVNUFRZO1xuXG4gIHJlYWRvbmx5IHJlYWRvbmx5JDogT2JzZXJ2YWJsZTxib29sZWFuPiA9XG4gICAgdGhpcy5jYXJ0SXRlbUNvbnRleHQ/LnJlYWRvbmx5JCA/PyBFTVBUWTtcblxuICBoaWRlSXRlbXMgPSB0cnVlO1xuXG4gIGxpbmVJdGVtcyQ6IE9ic2VydmFibGU8TGluZUl0ZW1bXT4gPSB0aGlzLm9yZGVyRW50cnkkLnBpcGUoXG4gICAgbWFwKChlbnRyeSkgPT5cbiAgICAgIHRoaXMuY29uZmlnQ2FydEVudHJ5QnVuZGxlSW5mb1NlcnZpY2UucmV0cmlldmVMaW5lSXRlbXMoZW50cnkpXG4gICAgKVxuICApO1xuXG4gIG51bWJlck9mTGluZUl0ZW1zJDogT2JzZXJ2YWJsZTxudW1iZXI+ID0gdGhpcy5saW5lSXRlbXMkLnBpcGUoXG4gICAgbWFwKChpdGVtcykgPT4gaXRlbXMubGVuZ3RoKVxuICApO1xuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBzdGF0ZSBvZiB0aGUgaXRlbXMgbGlzdC5cbiAgICovXG4gIHRvZ2dsZUl0ZW1zKCk6IHZvaWQge1xuICAgIHRoaXMuaGlkZUl0ZW1zID0gIXRoaXMuaGlkZUl0ZW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWVzIHdoZXRoZXIgdGhlIGNvbmZpZ3VyYXRvciB0eXBlIGlzIGEgYnVuZGxlIGJhc2VkIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtPcmRlckVudHJ5fSBlbnRyeSAtIE9yZGVyIGVudHJ5XG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtICd0cnVlJyBpZiB0aGUgZXhwZWN0ZWQgY29uZmlndXJhdG9yIHR5cGUsIG90aGVyd2lzZSAnZmFsc2UnXG4gICAqL1xuICBpc0J1bmRsZUJhc2VkQ29uZmlndXJhdG9yKGVudHJ5OiBPcmRlckVudHJ5KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29uZmlnSW5mb3MgPSBlbnRyeS5jb25maWd1cmF0aW9uSW5mb3M7XG4gICAgcmV0dXJuIGNvbmZpZ0luZm9zXG4gICAgICA/IHRoaXMuY29tbW9uQ29uZmlnVXRpbHNTZXJ2aWNlLmlzQnVuZGxlQmFzZWRDb25maWd1cmF0b3IoXG4gICAgICAgICAgY29uZmlnSW5mb3NbMF0/LmNvbmZpZ3VyYXRvclR5cGVcbiAgICAgICAgKVxuICAgICAgOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmllcyB3aGV0aGVyIHRoZSBjdXJyZW50IHNjcmVlbiBzaXplIGVxdWFscyBvciBpcyBsYXJnZXIgdGhhbiBicmVha3BvaW50IGBCUkVBS1BPSU5ULm1kYC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wIC0gbWV0aG9kIG5vdCB1c2VkIGFueW1vcmVcbiAgICogQHJldHVybnMge09ic2VydmFibGU8Ym9vbGVhbj59IC0gSWYgdGhlIGdpdmVuIGJyZWFrcG9pbnQgZXF1YWxzIG9yIGlzIGxhcmdlciB0aGFuYEJSRUFLUE9JTlQubWRgIHJldHVybnMgYHRydWVgLCBvdGhlcndpc2UgYGZhbHNlYC5cbiAgICovXG4gIGlzRGVza3RvcCgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5icmVha3BvaW50U2VydmljZS5pc1VwKEJSRUFLUE9JTlQubWQpO1xuICB9XG5cbiAgLy8gVE9ETzogcmVtb3ZlIHRoZSBsb2dpYyBiZWxvdyB3aGVuIGNvbmZpZ3VyYWJsZSBwcm9kdWN0cyBzdXBwb3J0IFwiU2F2ZWQgQ2FydFwiIGFuZCBcIlNhdmUgRm9yIExhdGVyXCJcbiAgcmVhZG9ubHkgc2hvdWxkU2hvd0J1dHRvbiQ6IE9ic2VydmFibGU8Ym9vbGVhbj4gPVxuICAgIHRoaXMuY29tbW9uQ29uZmlnVXRpbHNTZXJ2aWNlLmlzQWN0aXZlQ2FydENvbnRleHQodGhpcy5jYXJ0SXRlbUNvbnRleHQpO1xuXG4gIGdldEJ1dHRvblRleHQodHJhbnNsYXRlZFRleHQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdHJhbnNsYXRlZFRleHQpIHtcbiAgICAgIHRyYW5zbGF0ZWRUZXh0ID0gJyc7XG4gICAgfVxuICAgIGlmICh0aGlzLmhpZGVJdGVtcykge1xuICAgICAgdGhpcy50cmFuc2xhdGlvblxuICAgICAgICAudHJhbnNsYXRlKCdjb25maWd1cmF0b3IuaGVhZGVyLnNob3cnKVxuICAgICAgICAucGlwZSh0YWtlKDEpKVxuICAgICAgICAuc3Vic2NyaWJlKCh0ZXh0KSA9PiAodHJhbnNsYXRlZFRleHQgKz0gdGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRyYW5zbGF0aW9uXG4gICAgICAgIC50cmFuc2xhdGUoJ2NvbmZpZ3VyYXRvci5oZWFkZXIuaGlkZScpXG4gICAgICAgIC5waXBlKHRha2UoMSkpXG4gICAgICAgIC5zdWJzY3JpYmUoKHRleHQpID0+ICh0cmFuc2xhdGVkVGV4dCArPSB0ZXh0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYW5zbGF0ZWRUZXh0O1xuICB9XG5cbiAgZ2V0SXRlbXNNc2coaXRlbXM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgbGV0IHRyYW5zbGF0ZWRUZXh0ID0gJyc7XG4gICAgdGhpcy50cmFuc2xhdGlvblxuICAgICAgLnRyYW5zbGF0ZSgnY29uZmlndXJhdG9yLmExMXkuY2FydEVudHJ5QnVuZGxlSW5mbycsIHsgaXRlbXM6IGl0ZW1zIH0pXG4gICAgICAucGlwZSh0YWtlKDEpKVxuICAgICAgLnN1YnNjcmliZSgodGV4dCkgPT4gKHRyYW5zbGF0ZWRUZXh0ID0gdGV4dCkpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0QnV0dG9uVGV4dCh0cmFuc2xhdGVkVGV4dCk7XG4gIH1cblxuICBnZXRIaWRkZW5JdGVtSW5mbyhpdGVtOiBMaW5lSXRlbSk6IHN0cmluZyB7XG4gICAgbGV0IHRyYW5zbGF0ZWRUZXh0ID0gJyc7XG5cbiAgICBpZiAoaXRlbS5uYW1lICYmIGl0ZW0uZm9ybWF0dGVkUHJpY2UgJiYgaXRlbS5mb3JtYXR0ZWRRdWFudGl0eSkge1xuICAgICAgdGhpcy50cmFuc2xhdGlvblxuICAgICAgICAudHJhbnNsYXRlKCdjb25maWd1cmF0b3IuYTExeS5jYXJ0RW50cnlCdW5kbGUnLCB7XG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgIHByaWNlOiBpdGVtLmZvcm1hdHRlZFByaWNlLFxuICAgICAgICAgIHF1YW50aXR5OiBpdGVtLmZvcm1hdHRlZFF1YW50aXR5LFxuICAgICAgICB9KVxuICAgICAgICAucGlwZSh0YWtlKDEpKVxuICAgICAgICAuc3Vic2NyaWJlKCh0ZXh0KSA9PiAodHJhbnNsYXRlZFRleHQgPSB0ZXh0KSk7XG4gICAgfSBlbHNlIGlmIChpdGVtLm5hbWUgJiYgaXRlbS5mb3JtYXR0ZWRQcmljZSkge1xuICAgICAgdGhpcy50cmFuc2xhdGlvblxuICAgICAgICAudHJhbnNsYXRlKCdjb25maWd1cmF0b3IuYTExeS5jYXJ0RW50cnlCdW5kbGVOYW1lV2l0aFByaWNlJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBwcmljZTogaXRlbS5mb3JtYXR0ZWRQcmljZSxcbiAgICAgICAgfSlcbiAgICAgICAgLnBpcGUodGFrZSgxKSlcbiAgICAgICAgLnN1YnNjcmliZSgodGV4dCkgPT4gKHRyYW5zbGF0ZWRUZXh0ID0gdGV4dCkpO1xuICAgIH0gZWxzZSBpZiAoaXRlbS5uYW1lICYmIGl0ZW0uZm9ybWF0dGVkUXVhbnRpdHkpIHtcbiAgICAgIHRoaXMudHJhbnNsYXRpb25cbiAgICAgICAgLnRyYW5zbGF0ZSgnY29uZmlndXJhdG9yLmExMXkuY2FydEVudHJ5QnVuZGxlTmFtZVdpdGhRdWFudGl0eScsIHtcbiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgcXVhbnRpdHk6IGl0ZW0uZm9ybWF0dGVkUXVhbnRpdHksXG4gICAgICAgIH0pXG4gICAgICAgIC5waXBlKHRha2UoMSkpXG4gICAgICAgIC5zdWJzY3JpYmUoKHRleHQpID0+ICh0cmFuc2xhdGVkVGV4dCA9IHRleHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50cmFuc2xhdGlvblxuICAgICAgICAudHJhbnNsYXRlKCdjb25maWd1cmF0b3IuYTExeS5jYXJ0RW50cnlCdW5kbGVOYW1lJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgfSlcbiAgICAgICAgLnBpcGUodGFrZSgxKSlcbiAgICAgICAgLnN1YnNjcmliZSgodGV4dCkgPT4gKHRyYW5zbGF0ZWRUZXh0ID0gdGV4dCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFuc2xhdGVkVGV4dDtcbiAgfVxuXG4gIGdldEhpZGRlbkl0ZW1JbmZvSWQoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuICdjeC1pdGVtLWhpZGRlbi1pbmZvLScgKyBpbmRleC50b1N0cmluZygpO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwib3JkZXJFbnRyeSQgfCBhc3luYyBhcyBvcmRlckVudHJ5XCI+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc0J1bmRsZUJhc2VkQ29uZmlndXJhdG9yKG9yZGVyRW50cnkpXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIm51bWJlck9mTGluZUl0ZW1zJCB8IGFzeW5jIGFzIG51bWJlck9mSXRlbXNcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1udW1iZXItaXRlbXNcIj5cbiAgICAgICAge3tcbiAgICAgICAgICAnY29uZmlndXJhdG9yLmhlYWRlci5pdGVtcycgfCBjeFRyYW5zbGF0ZTogeyBjb3VudDogbnVtYmVyT2ZJdGVtcyB9XG4gICAgICAgIH19XG4gICAgICA8L2Rpdj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgKGNsaWNrKT1cInRvZ2dsZUl0ZW1zKClcIlxuICAgICAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cIiF0aGlzLmhpZGVJdGVtc1wiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiZ2V0SXRlbXNNc2cobnVtYmVyT2ZJdGVtcylcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtdG9nZ2xlLWhpZGUtaXRlbXNcIj5cbiAgICAgICAgICB7eyBnZXRCdXR0b25UZXh0KCkgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2J1dHRvbj5cblxuICAgICAgPGRpdiBjbGFzcz1cImN4LWl0ZW0taW5mb3NcIiBbY2xhc3Mub3Blbl09XCIhaGlkZUl0ZW1zXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgbGluZUl0ZW0gb2YgbGluZUl0ZW1zJCB8IGFzeW5jOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICBjbGFzcz1cImN4LWl0ZW0taW5mb1wiXG4gICAgICAgICAgYXR0ci5hcmlhLWRlc2NyaWJlZGJ5PVwie3sgZ2V0SGlkZGVuSXRlbUluZm9JZChpKSB9fVwiXG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBpZD1cInt7IGdldEhpZGRlbkl0ZW1JbmZvSWQoaSkgfX1cIiBjbGFzcz1cImN4LXZpc3VhbGx5LWhpZGRlblwiPlxuICAgICAgICAgICAge3sgZ2V0SGlkZGVuSXRlbUluZm8obGluZUl0ZW0pIH19XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1pdGVtLW5hbWVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAgIHt7IGxpbmVJdGVtPy5uYW1lIH19XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWl0ZW0tcXVhbnRpdHlcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJsaW5lSXRlbT8uZm9ybWF0dGVkUXVhbnRpdHlcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjeC1pZGVudGlmaWVyXCI+e3tcbiAgICAgICAgICAgICAgICAnY29uZmlndXJhdG9yLmF0dHJpYnV0ZS5xdWFudGl0eScgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgICB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjeC1pdGVtXCI+e3tcbiAgICAgICAgICAgICAgICBsaW5lSXRlbT8uZm9ybWF0dGVkUXVhbnRpdHkgfCBjeE51bWVyaWNcbiAgICAgICAgICAgICAgfX08L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtaXRlbS1wcmljZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImxpbmVJdGVtPy5mb3JtYXR0ZWRQcmljZVwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImN4LWlkZW50aWZpZXJcIj57e1xuICAgICAgICAgICAgICAgICdjb25maWd1cmF0b3Iub3ZlcnZpZXdGb3JtLml0ZW1QcmljZScgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgICB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjeC1pdGVtXCI+e3sgbGluZUl0ZW0/LmZvcm1hdHRlZFByaWNlIH19PC9zcGFuPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPGN4LWNvbmZpZ3VyZS1jYXJ0LWVudHJ5XG4gICAgICAqbmdJZj1cIlxuICAgICAgICAoc2hvdWxkU2hvd0J1dHRvbiQgfCBhc3luYykgJiZcbiAgICAgICAgICBvcmRlckVudHJ5Py5wcm9kdWN0Py5jb25maWd1cmFibGUgJiZcbiAgICAgICAgICBxdWFudGl0eUNvbnRyb2wkIHwgYXN5bmMgYXMgcXVhbnRpdHlDb250cm9sXG4gICAgICBcIlxuICAgICAgW2NhcnRFbnRyeV09XCJvcmRlckVudHJ5XCJcbiAgICAgIFtyZWFkT25seV09XCJyZWFkb25seSQgfCBhc3luY1wiXG4gICAgICBbbXNnQmFubmVyXT1cImZhbHNlXCJcbiAgICAgIFtkaXNhYmxlZF09XCJxdWFudGl0eUNvbnRyb2wuZGlzYWJsZWRcIlxuICAgID48L2N4LWNvbmZpZ3VyZS1jYXJ0LWVudHJ5PlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuIl19