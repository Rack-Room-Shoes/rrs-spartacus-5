/*
 * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component } from '@angular/core';
import { CommonConfigurator, } from '@spartacus/product-configurator/common';
import { ICON_TYPE } from '@spartacus/storefront';
import { filter, map, switchMap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../core/facade/configurator-commons.service";
import * as i2 from "@spartacus/product-configurator/common";
import * as i3 from "@angular/common";
import * as i4 from "@spartacus/storefront";
import * as i5 from "@angular/router";
import * as i6 from "@spartacus/core";
export class ConfiguratorOverviewNotificationBannerComponent {
    constructor(configuratorCommonsService, configRouterExtractorService, commonConfigUtilsService) {
        this.configuratorCommonsService = configuratorCommonsService;
        this.configRouterExtractorService = configRouterExtractorService;
        this.commonConfigUtilsService = commonConfigUtilsService;
        this.routerData$ = this.configRouterExtractorService.extractRouterData();
        this.configuration$ = this.routerData$.pipe(filter((routerData) => routerData.owner.type === CommonConfigurator.OwnerType.PRODUCT ||
            routerData.owner.type === CommonConfigurator.OwnerType.CART_ENTRY), switchMap((routerData) => this.configuratorCommonsService.getConfiguration(routerData.owner)));
        this.configurationOverview$ = this.configuration$.pipe(map((configuration) => configuration.overview));
        this.numberOfIssues$ = this.configuration$.pipe(map((configuration) => {
            //In case overview carries number of issues: We take it from there.
            //otherwise configuration's number will be accurate
            let configOv = configuration.overview;
            if (configOv?.totalNumberOfIssues) {
                return configOv.numberOfIncompleteCharacteristics !== undefined
                    ? configOv.numberOfIncompleteCharacteristics
                    : configOv.totalNumberOfIssues;
            }
            else {
                return configuration.totalNumberOfIssues
                    ? configuration.totalNumberOfIssues
                    : 0;
            }
        }));
        this.numberOfConflicts$ = this.configuration$.pipe(map((configuration) => {
            return configuration.overview?.numberOfConflicts ?? 0;
        }));
        this.skipConflictsOnIssueNavigation$ = this.configuration$.pipe(map((configuration) => {
            return (configuration.overview?.numberOfConflicts ?? 0) > 0;
        }));
        this.iconTypes = ICON_TYPE;
    }
}
ConfiguratorOverviewNotificationBannerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.3", ngImport: i0, type: ConfiguratorOverviewNotificationBannerComponent, deps: [{ token: i1.ConfiguratorCommonsService }, { token: i2.ConfiguratorRouterExtractorService }, { token: i2.CommonConfiguratorUtilsService }], target: i0.ɵɵFactoryTarget.Component });
ConfiguratorOverviewNotificationBannerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.3", type: ConfiguratorOverviewNotificationBannerComponent, selector: "cx-configurator-overview-notification-banner", ngImport: i0, template: "<ng-container *ngIf=\"routerData$ | async as routerData\">\n  <ng-container *ngIf=\"configurationOverview$ | async\">\n    <div\n      class=\"cx-error-notification-banner\"\n      *ngIf=\"numberOfIssues$ | async as numberOfIssues\"\n    >\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n      <div class=\"cx-error-msg\" id=\"cx-configurator-overview-error-msg\">\n        {{\n          'configurator.notificationBanner.numberOfIssues'\n            | cxTranslate: { count: numberOfIssues }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-error-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{\n            resolveIssues: true,\n            skipConflicts: skipConflictsOnIssueNavigation$ | async\n          }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveIssues' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <div\n      class=\"cx-conflict-notification-banner\"\n      *ngIf=\"numberOfConflicts$ | async as numberOfConflicts\"\n    >\n      <cx-icon [type]=\"iconTypes.WARNING\"></cx-icon>\n      <div class=\"cx-conflict-msg\" id=\"cx-configurator-overview-conflict-msg\">\n        {{\n          'configurator.notificationBanner.numberOfConflicts'\n            | cxTranslate: { count: numberOfConflicts }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-conflict-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{ resolveIssues: true }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveConflicts' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n", dependencies: [{ kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i4.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "directive", type: i5.RouterLink, selector: ":not(a):not(area)[routerLink]", inputs: ["queryParams", "fragment", "queryParamsHandling", "state", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "pipe", type: i3.AsyncPipe, name: "async" }, { kind: "pipe", type: i6.TranslatePipe, name: "cxTranslate" }, { kind: "pipe", type: i6.UrlPipe, name: "cxUrl" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.3", ngImport: i0, type: ConfiguratorOverviewNotificationBannerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-configurator-overview-notification-banner', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-container *ngIf=\"routerData$ | async as routerData\">\n  <ng-container *ngIf=\"configurationOverview$ | async\">\n    <div\n      class=\"cx-error-notification-banner\"\n      *ngIf=\"numberOfIssues$ | async as numberOfIssues\"\n    >\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n      <div class=\"cx-error-msg\" id=\"cx-configurator-overview-error-msg\">\n        {{\n          'configurator.notificationBanner.numberOfIssues'\n            | cxTranslate: { count: numberOfIssues }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-error-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{\n            resolveIssues: true,\n            skipConflicts: skipConflictsOnIssueNavigation$ | async\n          }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveIssues' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <div\n      class=\"cx-conflict-notification-banner\"\n      *ngIf=\"numberOfConflicts$ | async as numberOfConflicts\"\n    >\n      <cx-icon [type]=\"iconTypes.WARNING\"></cx-icon>\n      <div class=\"cx-conflict-msg\" id=\"cx-configurator-overview-conflict-msg\">\n        {{\n          'configurator.notificationBanner.numberOfConflicts'\n            | cxTranslate: { count: numberOfConflicts }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-conflict-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{ resolveIssues: true }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveConflicts' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n" }]
        }], ctorParameters: function () { return [{ type: i1.ConfiguratorCommonsService }, { type: i2.ConfiguratorRouterExtractorService }, { type: i2.CommonConfiguratorUtilsService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL292ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIvY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL292ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIvY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkUsT0FBTyxFQUNMLGtCQUFrQixHQUluQixNQUFNLHdDQUF3QyxDQUFDO0FBQ2hELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7QUFTeEQsTUFBTSxPQUFPLCtDQUErQztJQW1EMUQsWUFDWSwwQkFBc0QsRUFDdEQsNEJBQWdFLEVBQ2hFLHdCQUF3RDtRQUZ4RCwrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBQ3RELGlDQUE0QixHQUE1Qiw0QkFBNEIsQ0FBb0M7UUFDaEUsNkJBQXdCLEdBQXhCLHdCQUF3QixDQUFnQztRQXJEcEUsZ0JBQVcsR0FDVCxJQUFJLENBQUMsNEJBQTRCLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUV4RCxtQkFBYyxHQUNaLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUNuQixNQUFNLENBQ0osQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUNiLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxPQUFPO1lBQzlELFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQ3BFLEVBQ0QsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FDdkIsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FDbkUsQ0FDRixDQUFDO1FBRUosMkJBQXNCLEdBQ3BCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFFM0Usb0JBQWUsR0FBdUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQzVELEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQ3BCLG1FQUFtRTtZQUNuRSxtREFBbUQ7WUFDbkQsSUFBSSxRQUFRLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQztZQUN0QyxJQUFJLFFBQVEsRUFBRSxtQkFBbUIsRUFBRTtnQkFDakMsT0FBTyxRQUFRLENBQUMsaUNBQWlDLEtBQUssU0FBUztvQkFDN0QsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxpQ0FBaUM7b0JBQzVDLENBQUMsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7YUFDbEM7aUJBQU07Z0JBQ0wsT0FBTyxhQUFhLENBQUMsbUJBQW1CO29CQUN0QyxDQUFDLENBQUMsYUFBYSxDQUFDLG1CQUFtQjtvQkFDbkMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNQO1FBQ0gsQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQUVGLHVCQUFrQixHQUF1QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FDL0QsR0FBRyxDQUFDLENBQUMsYUFBYSxFQUFFLEVBQUU7WUFDcEIsT0FBTyxhQUFhLENBQUMsUUFBUSxFQUFFLGlCQUFpQixJQUFJLENBQUMsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FDSCxDQUFDO1FBRUYsb0NBQStCLEdBQzdCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUN0QixHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsRUFBRTtZQUNwQixPQUFPLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQUVKLGNBQVMsR0FBRyxTQUFTLENBQUM7SUFNbkIsQ0FBQzs7NElBdkRPLCtDQUErQztnSUFBL0MsK0NBQStDLG9GQ3hCNUQseXZFQWlFQTsyRkR6Q2EsK0NBQStDO2tCQUwzRCxTQUFTOytCQUNFLDhDQUE4QyxtQkFFdkMsdUJBQXVCLENBQUMsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIyIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIENvbW1vbkNvbmZpZ3VyYXRvcixcbiAgQ29tbW9uQ29uZmlndXJhdG9yVXRpbHNTZXJ2aWNlLFxuICBDb25maWd1cmF0b3JSb3V0ZXIsXG4gIENvbmZpZ3VyYXRvclJvdXRlckV4dHJhY3RvclNlcnZpY2UsXG59IGZyb20gJ0BzcGFydGFjdXMvcHJvZHVjdC1jb25maWd1cmF0b3IvY29tbW9uJztcbmltcG9ydCB7IElDT05fVFlQRSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCwgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9jb3JlL2ZhY2FkZS9jb25maWd1cmF0b3ItY29tbW9ucy5zZXJ2aWNlJztcbmltcG9ydCB7IENvbmZpZ3VyYXRvciB9IGZyb20gJy4uLy4uL2NvcmUvbW9kZWwvY29uZmlndXJhdG9yLm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdG9yT3ZlcnZpZXdOb3RpZmljYXRpb25CYW5uZXJDb21wb25lbnQge1xuICByb3V0ZXJEYXRhJDogT2JzZXJ2YWJsZTxDb25maWd1cmF0b3JSb3V0ZXIuRGF0YT4gPVxuICAgIHRoaXMuY29uZmlnUm91dGVyRXh0cmFjdG9yU2VydmljZS5leHRyYWN0Um91dGVyRGF0YSgpO1xuXG4gIGNvbmZpZ3VyYXRpb24kOiBPYnNlcnZhYmxlPENvbmZpZ3VyYXRvci5Db25maWd1cmF0aW9uPiA9XG4gICAgdGhpcy5yb3V0ZXJEYXRhJC5waXBlKFxuICAgICAgZmlsdGVyKFxuICAgICAgICAocm91dGVyRGF0YSkgPT5cbiAgICAgICAgICByb3V0ZXJEYXRhLm93bmVyLnR5cGUgPT09IENvbW1vbkNvbmZpZ3VyYXRvci5Pd25lclR5cGUuUFJPRFVDVCB8fFxuICAgICAgICAgIHJvdXRlckRhdGEub3duZXIudHlwZSA9PT0gQ29tbW9uQ29uZmlndXJhdG9yLk93bmVyVHlwZS5DQVJUX0VOVFJZXG4gICAgICApLFxuICAgICAgc3dpdGNoTWFwKChyb3V0ZXJEYXRhKSA9PlxuICAgICAgICB0aGlzLmNvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLmdldENvbmZpZ3VyYXRpb24ocm91dGVyRGF0YS5vd25lcilcbiAgICAgIClcbiAgICApO1xuXG4gIGNvbmZpZ3VyYXRpb25PdmVydmlldyQ6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLk92ZXJ2aWV3IHwgdW5kZWZpbmVkPiA9XG4gICAgdGhpcy5jb25maWd1cmF0aW9uJC5waXBlKG1hcCgoY29uZmlndXJhdGlvbikgPT4gY29uZmlndXJhdGlvbi5vdmVydmlldykpO1xuXG4gIG51bWJlck9mSXNzdWVzJDogT2JzZXJ2YWJsZTxudW1iZXI+ID0gdGhpcy5jb25maWd1cmF0aW9uJC5waXBlKFxuICAgIG1hcCgoY29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgLy9JbiBjYXNlIG92ZXJ2aWV3IGNhcnJpZXMgbnVtYmVyIG9mIGlzc3VlczogV2UgdGFrZSBpdCBmcm9tIHRoZXJlLlxuICAgICAgLy9vdGhlcndpc2UgY29uZmlndXJhdGlvbidzIG51bWJlciB3aWxsIGJlIGFjY3VyYXRlXG4gICAgICBsZXQgY29uZmlnT3YgPSBjb25maWd1cmF0aW9uLm92ZXJ2aWV3O1xuICAgICAgaWYgKGNvbmZpZ092Py50b3RhbE51bWJlck9mSXNzdWVzKSB7XG4gICAgICAgIHJldHVybiBjb25maWdPdi5udW1iZXJPZkluY29tcGxldGVDaGFyYWN0ZXJpc3RpY3MgIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gY29uZmlnT3YubnVtYmVyT2ZJbmNvbXBsZXRlQ2hhcmFjdGVyaXN0aWNzXG4gICAgICAgICAgOiBjb25maWdPdi50b3RhbE51bWJlck9mSXNzdWVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ3VyYXRpb24udG90YWxOdW1iZXJPZklzc3Vlc1xuICAgICAgICAgID8gY29uZmlndXJhdGlvbi50b3RhbE51bWJlck9mSXNzdWVzXG4gICAgICAgICAgOiAwO1xuICAgICAgfVxuICAgIH0pXG4gICk7XG5cbiAgbnVtYmVyT2ZDb25mbGljdHMkOiBPYnNlcnZhYmxlPG51bWJlcj4gPSB0aGlzLmNvbmZpZ3VyYXRpb24kLnBpcGUoXG4gICAgbWFwKChjb25maWd1cmF0aW9uKSA9PiB7XG4gICAgICByZXR1cm4gY29uZmlndXJhdGlvbi5vdmVydmlldz8ubnVtYmVyT2ZDb25mbGljdHMgPz8gMDtcbiAgICB9KVxuICApO1xuXG4gIHNraXBDb25mbGljdHNPbklzc3VlTmF2aWdhdGlvbiQ6IE9ic2VydmFibGU8Ym9vbGVhbj4gPVxuICAgIHRoaXMuY29uZmlndXJhdGlvbiQucGlwZShcbiAgICAgIG1hcCgoY29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gKGNvbmZpZ3VyYXRpb24ub3ZlcnZpZXc/Lm51bWJlck9mQ29uZmxpY3RzID8/IDApID4gMDtcbiAgICAgIH0pXG4gICAgKTtcblxuICBpY29uVHlwZXMgPSBJQ09OX1RZUEU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGNvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlOiBDb25maWd1cmF0b3JDb21tb25zU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY29uZmlnUm91dGVyRXh0cmFjdG9yU2VydmljZTogQ29uZmlndXJhdG9yUm91dGVyRXh0cmFjdG9yU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY29tbW9uQ29uZmlnVXRpbHNTZXJ2aWNlOiBDb21tb25Db25maWd1cmF0b3JVdGlsc1NlcnZpY2VcbiAgKSB7fVxufVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cInJvdXRlckRhdGEkIHwgYXN5bmMgYXMgcm91dGVyRGF0YVwiPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29uZmlndXJhdGlvbk92ZXJ2aWV3JCB8IGFzeW5jXCI+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJjeC1lcnJvci1ub3RpZmljYXRpb24tYmFubmVyXCJcbiAgICAgICpuZ0lmPVwibnVtYmVyT2ZJc3N1ZXMkIHwgYXN5bmMgYXMgbnVtYmVyT2ZJc3N1ZXNcIlxuICAgID5cbiAgICAgIDxjeC1pY29uIFt0eXBlXT1cImljb25UeXBlcy5FUlJPUlwiPjwvY3gtaWNvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1lcnJvci1tc2dcIiBpZD1cImN4LWNvbmZpZ3VyYXRvci1vdmVydmlldy1lcnJvci1tc2dcIj5cbiAgICAgICAge3tcbiAgICAgICAgICAnY29uZmlndXJhdG9yLm5vdGlmaWNhdGlvbkJhbm5lci5udW1iZXJPZklzc3VlcydcbiAgICAgICAgICAgIHwgY3hUcmFuc2xhdGU6IHsgY291bnQ6IG51bWJlck9mSXNzdWVzIH1cbiAgICAgICAgfX1cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzPVwibGluayBjeC1hY3Rpb24tbGlua1wiXG4gICAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cImN4LWNvbmZpZ3VyYXRvci1vdmVydmlldy1lcnJvci1tc2dcIlxuICAgICAgICAgIFtyb3V0ZXJMaW5rXT1cIlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjeFJvdXRlOiAnY29uZmlndXJlJyArIHJvdXRlckRhdGEub3duZXIuY29uZmlndXJhdG9yVHlwZSxcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgZW50aXR5S2V5OiByb3V0ZXJEYXRhLm93bmVyLmlkLFxuICAgICAgICAgICAgICAgIG93bmVyVHlwZTogcm91dGVyRGF0YS5vd25lci50eXBlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gfCBjeFVybFxuICAgICAgICAgIFwiXG4gICAgICAgICAgW3F1ZXJ5UGFyYW1zXT1cIntcbiAgICAgICAgICAgIHJlc29sdmVJc3N1ZXM6IHRydWUsXG4gICAgICAgICAgICBza2lwQ29uZmxpY3RzOiBza2lwQ29uZmxpY3RzT25Jc3N1ZU5hdmlnYXRpb24kIHwgYXN5bmNcbiAgICAgICAgICB9XCJcbiAgICAgICAgICBjeEF1dG9Gb2N1c1xuICAgICAgICA+XG4gICAgICAgICAge3sgJ2NvbmZpZ3VyYXRvci5oZWFkZXIucmVzb2x2ZUlzc3VlcycgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwiY3gtY29uZmxpY3Qtbm90aWZpY2F0aW9uLWJhbm5lclwiXG4gICAgICAqbmdJZj1cIm51bWJlck9mQ29uZmxpY3RzJCB8IGFzeW5jIGFzIG51bWJlck9mQ29uZmxpY3RzXCJcbiAgICA+XG4gICAgICA8Y3gtaWNvbiBbdHlwZV09XCJpY29uVHlwZXMuV0FSTklOR1wiPjwvY3gtaWNvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1jb25mbGljdC1tc2dcIiBpZD1cImN4LWNvbmZpZ3VyYXRvci1vdmVydmlldy1jb25mbGljdC1tc2dcIj5cbiAgICAgICAge3tcbiAgICAgICAgICAnY29uZmlndXJhdG9yLm5vdGlmaWNhdGlvbkJhbm5lci5udW1iZXJPZkNvbmZsaWN0cydcbiAgICAgICAgICAgIHwgY3hUcmFuc2xhdGU6IHsgY291bnQ6IG51bWJlck9mQ29uZmxpY3RzIH1cbiAgICAgICAgfX1cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzPVwibGluayBjeC1hY3Rpb24tbGlua1wiXG4gICAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cImN4LWNvbmZpZ3VyYXRvci1vdmVydmlldy1jb25mbGljdC1tc2dcIlxuICAgICAgICAgIFtyb3V0ZXJMaW5rXT1cIlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjeFJvdXRlOiAnY29uZmlndXJlJyArIHJvdXRlckRhdGEub3duZXIuY29uZmlndXJhdG9yVHlwZSxcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgZW50aXR5S2V5OiByb3V0ZXJEYXRhLm93bmVyLmlkLFxuICAgICAgICAgICAgICAgIG93bmVyVHlwZTogcm91dGVyRGF0YS5vd25lci50eXBlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gfCBjeFVybFxuICAgICAgICAgIFwiXG4gICAgICAgICAgW3F1ZXJ5UGFyYW1zXT1cInsgcmVzb2x2ZUlzc3VlczogdHJ1ZSB9XCJcbiAgICAgICAgICBjeEF1dG9Gb2N1c1xuICAgICAgICA+XG4gICAgICAgICAge3sgJ2NvbmZpZ3VyYXRvci5oZWFkZXIucmVzb2x2ZUNvbmZsaWN0cycgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuIl19