{"version":3,"file":"spartacus-cds.mjs","sources":["../../../integration-libs/cds/src/cds-models/index.ts","../../../integration-libs/cds/src/config/cds-config.ts","../../../integration-libs/cds/src/config/cds-config-validator.ts","../../../integration-libs/cds/src/config/default-cds-config.ts","../../../integration-libs/cds/src/config/index.ts","../../../integration-libs/cds/src/utils/dynamic-template.ts","../../../integration-libs/cds/src/services/cds-endpoints.service.ts","../../../integration-libs/cds/src/merchandising/adapters/strategy/cds-merchandising-strategy.adapter.ts","../../../integration-libs/cds/src/merchandising/adapters/strategy/index.ts","../../../integration-libs/cds/src/merchandising/adapters/index.ts","../../../integration-libs/cds/src/merchandising/cms-components/directives/attributes/attributes.directive.ts","../../../integration-libs/cds/src/merchandising/cms-components/directives/attributes/attributes.module.ts","../../../integration-libs/cds/src/merchandising/cms-components/directives/attributes/index.ts","../../../integration-libs/cds/src/merchandising/cms-components/directives/index.ts","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel/model/merchandising-carousel-events.model.ts","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel/model/index.ts","../../../integration-libs/cds/src/merchandising/connectors/strategy/merchandising-strategy.adapter.ts","../../../integration-libs/cds/src/merchandising/connectors/strategy/merchandising-strategy.connector.ts","../../../integration-libs/cds/src/merchandising/connectors/strategy/index.ts","../../../integration-libs/cds/src/merchandising/connectors/index.ts","../../../integration-libs/cds/src/profiletag/adapters/cds-backend-notification-adapter.ts","../../../integration-libs/cds/src/profiletag/adapters/occ-backend-notification-adapter.ts","../../../integration-libs/cds/src/profiletag/adapters/index.ts","../../../integration-libs/cds/src/profiletag/model/profile-tag.model.ts","../../../integration-libs/cds/src/profiletag/services/profiletag-event.service.ts","../../../integration-libs/cds/src/profiletag/connectors/cds-backend-connector.ts","../../../integration-libs/cds/src/profiletag/services/profile-tag-lifecycle.service.ts","../../../integration-libs/cds/src/profiletag/services/profile-tag.injector.service.ts","../../../integration-libs/cds/src/profiletag/cms-components/profile-tag.component.ts","../../../integration-libs/cds/src/profiletag/cms-components/profile-tag-cms.module.ts","../../../integration-libs/cds/src/profiletag/cms-components/index.ts","../../../integration-libs/cds/src/profiletag/connectors/index.ts","../../../integration-libs/cds/src/profiletag/http-interceptors/consent-reference-interceptor.ts","../../../integration-libs/cds/src/profiletag/http-interceptors/debug-interceptor.ts","../../../integration-libs/cds/src/profiletag/http-interceptors/index.ts","../../../integration-libs/cds/src/profiletag/model/index.ts","../../../integration-libs/cds/src/profiletag/profile-tag.module.ts","../../../integration-libs/cds/src/profiletag/services/profile-tag-push-events.service.ts","../../../integration-libs/cds/src/profiletag/services/index.ts","../../../integration-libs/cds/src/profiletag/tracking/tracking.service.ts","../../../integration-libs/cds/src/profiletag/tracking/tracking.module.ts","../../../integration-libs/cds/src/profiletag/tracking/index.ts","../../../integration-libs/cds/src/profiletag/index.ts","../../../integration-libs/cds/src/merchandising/facade/cds-merchandising-user-context.service.ts","../../../integration-libs/cds/src/merchandising/facade/cds-merchandising-site-context.service.ts","../../../integration-libs/cds/src/merchandising/facade/cds-merchandising-product.service.ts","../../../integration-libs/cds/src/merchandising/facade/index.ts","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel/merchandising-carousel.component.service.ts","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel/merchandising-carousel.component.ts","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel/merchandising-carousel.component.html","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel-cms.module.ts","../../../integration-libs/cds/src/merchandising/cms-components/merchandising-carousel/index.ts","../../../integration-libs/cds/src/merchandising/cms-components/index.ts","../../../integration-libs/cds/src/merchandising/merchandising.module.ts","../../../integration-libs/cds/src/merchandising/model/index.ts","../../../integration-libs/cds/src/merchandising/index.ts","../../../integration-libs/cds/src/cds.module.ts","../../../integration-libs/cds/public_api.ts","../../../integration-libs/cds/spartacus-cds.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cds-endpoints.model';\nexport * from './cds-strategy-request.model';\nexport * from './cms.model';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { CdsEndpoints } from '../cds-models/cds-endpoints.model';\nimport { MerchandisingConfig } from './merchandising.config';\nimport { ProfileTagConfig } from './profile-tag.config';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class CdsConfig {\n  cds?: {\n    tenant?: string;\n    baseUrl?: string;\n    consentTemplateId?: string;\n    endpoints?: CdsEndpoints;\n    merchandising?: MerchandisingConfig;\n    profileTag?: ProfileTagConfig;\n  };\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends CdsConfig {}\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CdsConfig } from './cds-config';\n\nexport function cdsConfigValidator(config: CdsConfig): string | void {\n  if (!config.cds) {\n    return 'Please configure the config.cds object before using the CDS library';\n  }\n  if (config.cds.profileTag !== undefined) {\n    if (\n      config.cds.profileTag.configUrl === undefined ||\n      config.cds.profileTag.configUrl.trim().length === 0\n    ) {\n      return 'Please configure cds.profileTag.configUrl before using the CDS library';\n    }\n    if (\n      config.cds.profileTag.javascriptUrl === undefined ||\n      config.cds.profileTag.javascriptUrl.trim().length === 0\n    ) {\n      return 'Please configure cds.profileTag.configUrl before using the CDS library';\n    }\n  }\n  if (\n    config.cds.tenant === undefined ||\n    config.cds.tenant.trim().length === 0\n  ) {\n    return 'Please configure cds.tenant before using CDS library';\n  }\n\n  if (config.cds.baseUrl === undefined) {\n    return 'Please configure cds.baseUrl before using CDS library';\n  }\n\n  if (\n    config.cds.endpoints === undefined ||\n    config.cds.endpoints.strategyProducts === undefined\n  ) {\n    return 'Please configure the cds.endpoints before using CDS library';\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CdsConfig } from './cds-config';\n\nexport const DEFAULT_CDS_CONFIG: CdsConfig = {\n  cds: {\n    tenant: '',\n    baseUrl: '',\n    endpoints: {\n      strategyProducts: '/strategy/${tenant}/strategies/${strategyId}/products',\n    },\n    merchandising: {\n      defaultCarouselViewportThreshold: 80,\n    },\n    consentTemplateId: 'PROFILE',\n    profileTag: {\n      allowInsecureCookies: false,\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cds-config';\nexport * from './cds-config-validator';\nexport * from './default-cds-config';\nexport * from './merchandising.config';\nexport * from './profile-tag.config';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DynamicTemplate {\n  static resolve(templateString: string, templateVariables: Object) {\n    for (const variableLabel of Object.keys(templateVariables)) {\n      const placeholder = new RegExp('\\\\${' + variableLabel + '}', 'g');\n      templateString = templateString.replace(\n        placeholder,\n        templateVariables[variableLabel]\n      );\n    }\n    return templateString;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { CdsConfig } from '../config/cds-config';\nimport { DynamicTemplate } from '../utils/dynamic-template';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdsEndpointsService {\n  constructor(private cdsConfig: CdsConfig) {}\n\n  getUrl(\n    endpoint: string,\n    urlParams: object = {},\n    queryParams?: object\n  ): string {\n    if (\n      this.cdsConfig &&\n      this.cdsConfig.cds &&\n      this.cdsConfig.cds.endpoints[endpoint]\n    ) {\n      endpoint = this.cdsConfig.cds.endpoints[endpoint];\n    }\n\n    if (!urlParams['tenant']) {\n      urlParams['tenant'] = this.cdsConfig.cds.tenant;\n    }\n\n    Object.keys(urlParams).forEach((key) => {\n      urlParams[key] = encodeURIComponent(urlParams[key]);\n    });\n    endpoint = DynamicTemplate.resolve(endpoint, urlParams);\n\n    if (queryParams) {\n      let httpParamsOptions;\n\n      if (endpoint.includes('?')) {\n        let queryParamsFromEndpoint;\n        [endpoint, queryParamsFromEndpoint] = endpoint.split('?');\n\n        httpParamsOptions = { fromString: queryParamsFromEndpoint };\n      }\n\n      let httpParams = new HttpParams(httpParamsOptions);\n      Object.keys(queryParams).forEach((key) => {\n        const value = queryParams[key];\n        if (value !== undefined) {\n          if (value === null) {\n            httpParams = httpParams.delete(key);\n          } else {\n            httpParams = httpParams.set(key, value);\n          }\n        }\n      });\n\n      const params = httpParams.toString();\n      if (params.length) {\n        endpoint += '?' + params;\n      }\n    }\n\n    return this.getEndpoint(endpoint);\n  }\n\n  private getEndpoint(endpoint: string): string {\n    /*\n     * If the endpoint to get the url for already has the configured base url appended,\n     * do not try and append it again\n     */\n    if (endpoint.startsWith(this.getBaseEndpoint())) {\n      return endpoint;\n    }\n\n    if (!endpoint.startsWith('/')) {\n      endpoint = '/' + endpoint;\n    }\n\n    return `${this.getBaseEndpoint()}${endpoint}`;\n  }\n\n  private getBaseEndpoint(): string {\n    if (!this.cdsConfig || !this.cdsConfig.cds || !this.cdsConfig.cds.baseUrl) {\n      return '';\n    }\n\n    return this.cdsConfig.cds.baseUrl;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { CdsEndpointsService } from '../../../services/cds-endpoints.service';\nimport { MerchandisingStrategyAdapter } from '../../connectors/strategy/merchandising-strategy.adapter';\nimport { StrategyProducts } from '../../model/strategy-products.model';\nimport { StrategyRequest } from './../../../cds-models/cds-strategy-request.model';\n\nconst STRATEGY_PRODUCTS_ENDPOINT_KEY = 'strategyProducts';\n\n@Injectable()\nexport class CdsMerchandisingStrategyAdapter\n  implements MerchandisingStrategyAdapter\n{\n  constructor(\n    private cdsEndpointsService: CdsEndpointsService,\n    protected http: HttpClient\n  ) {}\n\n  loadProductsForStrategy(\n    strategyId: string,\n    strategyRequest: StrategyRequest = {}\n  ): Observable<StrategyProducts> {\n    let headers: HttpHeaders = new HttpHeaders();\n    if (strategyRequest.headers && strategyRequest.headers.consentReference) {\n      headers = headers.set(\n        'consent-reference',\n        strategyRequest.headers.consentReference\n      );\n    }\n    return this.http.get(\n      this.cdsEndpointsService.getUrl(\n        STRATEGY_PRODUCTS_ENDPOINT_KEY,\n        {\n          strategyId,\n        },\n        strategyRequest.queryParams\n      ),\n      { headers }\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cds-merchandising-strategy.adapter';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './strategy/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  Directive,\n  ElementRef,\n  Input,\n  OnChanges,\n  Renderer2,\n} from '@angular/core';\n\n@Directive({\n  selector: '[cxAttributes]',\n})\nexport class AttributesDirective implements OnChanges {\n  @Input() cxAttributes: { [attribute: string]: any };\n\n  private _attributesNamePrefix: string;\n  @Input() set cxAttributesNamePrefix(attributesNamePrefix: string) {\n    this._attributesNamePrefix = attributesNamePrefix;\n  }\n\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) {}\n\n  ngOnChanges(): void {\n    if (this.cxAttributes) {\n      for (const attributeName in this.cxAttributes) {\n        if (this.cxAttributes.hasOwnProperty(attributeName)) {\n          const attributeValue = this.cxAttributes[attributeName];\n          if (attributeValue) {\n            const _attributeName = this._attributesNamePrefix\n              ? `${this._attributesNamePrefix}-${attributeName}`\n              : attributeName;\n            this.renderer.setAttribute(\n              this.elementRef.nativeElement,\n              _attributeName,\n              attributeValue\n            );\n          }\n        }\n      }\n    }\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { AttributesDirective } from './attributes.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [AttributesDirective],\n  exports: [AttributesDirective],\n})\nexport class AttributesModule {}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './attributes.directive';\nexport * from './attributes.module';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './attributes/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ProfileTagPushEvent } from '../../../../profiletag/index';\nimport { MerchandisingMetadata } from '../../../model/index';\n\nexport interface CarouselEvent {\n  carouselId: string;\n  carouselName: string;\n  strategyId: string;\n  metadata?: MerchandisingMetadata;\n}\n\nexport class MerchandisingCarouselViewedEvent implements ProfileTagPushEvent {\n  name = 'CarouselViewed';\n  data: any;\n  constructor(carouselEvent: CarouselEvent, productSkus: string[]) {\n    this.data = {\n      ...carouselEvent,\n      productSkus,\n    };\n  }\n}\n\nexport class MerchandisingCarouselClickedEvent implements ProfileTagPushEvent {\n  name = 'CarouselClicked';\n  data: any;\n  constructor(\n    carouselEvent: CarouselEvent,\n    slotId: string,\n    sku: string,\n    imageUrl: string\n  ) {\n    this.data = {\n      ...carouselEvent,\n      slotId,\n      sku,\n      imageUrl,\n    };\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './merchandising-carousel-events.model';\nexport * from './merchandising-carousel.model';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Observable } from 'rxjs';\nimport { StrategyProducts } from '../../model/strategy-products.model';\nimport { StrategyRequest } from './../../../cds-models/cds-strategy-request.model';\n\nexport abstract class MerchandisingStrategyAdapter {\n  /**\n   * Load products for a given merchandising strategy\n   *\n   * @param strategyId the id of the merchandising strategy to load products for\n   */\n  abstract loadProductsForStrategy(\n    strategyId: string,\n    strategyRequest?: StrategyRequest\n  ): Observable<StrategyProducts>;\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { StrategyProducts } from '../../model/strategy-products.model';\nimport { StrategyRequest } from './../../../cds-models/cds-strategy-request.model';\nimport { MerchandisingStrategyAdapter } from './merchandising-strategy.adapter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MerchandisingStrategyConnector {\n  constructor(protected strategyAdapter: MerchandisingStrategyAdapter) {}\n\n  loadProductsForStrategy(\n    strategyId: string,\n    strategyRequest?: StrategyRequest\n  ): Observable<StrategyProducts> {\n    return this.strategyAdapter.loadProductsForStrategy(\n      strategyId,\n      strategyRequest\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './merchandising-strategy.adapter';\nexport * from './merchandising-strategy.connector';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './strategy/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Observable } from 'rxjs';\n\nexport abstract class CdsBackendNotificationAdapter {\n  abstract notifySuccessfulLogin(): Observable<void>;\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { OccEndpointsService } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMapTo } from 'rxjs/operators';\nimport { CdsBackendNotificationAdapter } from './cds-backend-notification-adapter';\n\n@Injectable()\nexport class OccBackendNotification implements CdsBackendNotificationAdapter {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService\n  ) {}\n  notifySuccessfulLogin(): Observable<void> {\n    return this.http\n      .post<{}>(\n        `${this.occEndpoints.getBaseUrl()}/users/current/loginnotification`,\n        {}\n      )\n      .pipe(switchMapTo(of()));\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cds-backend-notification-adapter';\nexport * from './occ-backend-notification-adapter';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { PersonalizationAction } from '@spartacus/tracking/personalization/core';\nimport { Cart } from '@spartacus/cart/base/root';\n\nexport interface ProfileTagWindowObject extends Window {\n  Y_TRACKING: {\n    q?: ProfileTagJsConfig[][];\n    eventLayer?: ProfileTagPushEvent[];\n  };\n}\n\nexport interface ProfileTagJsConfig {\n  tenant?: string;\n  siteId?: string;\n  spa: boolean;\n  javascriptUrl?: string;\n  configUrl?: string;\n  allowInsecureCookies?: boolean;\n  gtmId?: string;\n}\n\nexport interface ConsentReferenceEvent extends CustomEvent {\n  detail: {\n    consentReference: string;\n  };\n}\n\nexport interface DebugEvent extends CustomEvent {\n  detail: {\n    debug: boolean;\n  };\n}\n\nexport enum InternalProfileTagEventNames {\n  CONSENT_REFERENCE_LOADED = 'profiletag_consentReferenceLoaded',\n  DEBUG_FLAG_CHANGED = 'profiletag_debugFlagChanged',\n}\n\nexport interface ProfileTagPushEvent {\n  name: string;\n  data?: {\n    segments?: string[];\n    actions?: PersonalizationAction[];\n    [x: string]: any;\n  };\n}\n\nexport class NavigatedPushEvent implements ProfileTagPushEvent {\n  name = 'Navigated';\n  data: any;\n  constructor(data?) {\n    this.data = data;\n  }\n}\n\nexport class ConsentChangedPushEvent implements ProfileTagPushEvent {\n  name = 'ConsentChanged';\n  data: { granted: boolean } = { granted: undefined };\n  constructor(granted: boolean) {\n    this.data.granted = granted;\n  }\n}\n\nexport class KeywordSearchPushEvent implements ProfileTagPushEvent {\n  name = 'KeywordSearch';\n  data: any;\n  constructor(data: { searchTerm: string; numResults: Number }) {\n    this.data = data;\n  }\n}\n\nexport class ProductViewPushEvent implements ProfileTagPushEvent {\n  name = 'ProductDetailsPageViewed';\n  data: any;\n  constructor(data: {\n    productSku: string;\n    productName: string;\n    productPrice: Number;\n    productCategory: string;\n    productCategoryName: string;\n    categories: Array<string>;\n  }) {\n    this.data = data;\n  }\n}\n\nexport class CategoryViewPushEvent implements ProfileTagPushEvent {\n  name = 'CategoryPageViewed';\n  data: any;\n  constructor(data: { productCategory: string; productCategoryName: string }) {\n    this.data = data;\n  }\n}\n\n// TODO:#cds - check the class name and the `name` property\nexport class BrandPageVisitedEvent implements ProfileTagPushEvent {\n  name = 'BrandPageVisitedEvent';\n  data: { brandCode: string; brandName: string };\n  constructor(data: { brandCode: string; brandName: string }) {\n    this.data = data;\n  }\n}\n\nexport class HomePageViewPushEvent implements ProfileTagPushEvent {\n  name = 'HomePageViewed';\n  data: any;\n  constructor(data?: any) {\n    this.data = data;\n  }\n}\n\nexport class OrderConfirmationPushEvent implements ProfileTagPushEvent {\n  name = 'OrderConfirmationPageViewed';\n  data: any;\n  constructor(data?: any) {\n    this.data = data;\n  }\n}\n\nexport class CartViewPushEvent implements ProfileTagPushEvent {\n  name = 'CartPageViewed';\n  data: any;\n  constructor(data?: any) {\n    this.data = data;\n  }\n}\n\nexport class AddedToCartPushEvent implements ProfileTagPushEvent {\n  name = 'AddedToCart';\n  data: any;\n  constructor(data: {\n    productQty: number;\n    productSku: string;\n    productName: string;\n    cartId: string;\n    cartCode: string;\n    categories: Array<string>;\n    productCategoryName: string;\n    productCategory: string;\n    productPrice: Number;\n  }) {\n    this.data = data;\n  }\n}\n\nexport class RemovedFromCartPushEvent implements ProfileTagPushEvent {\n  name = 'RemovedFromCart';\n  data: any;\n  constructor(data: {\n    productSku: string;\n    productName: string;\n    productCategory: string;\n    cartId: string;\n    cartCode: string;\n    productCategoryName: string;\n    categories: Array<string>;\n  }) {\n    this.data = data;\n  }\n}\n\nexport class ModifiedCartPushEvent implements ProfileTagPushEvent {\n  name = 'ModifiedCart';\n  data: any;\n  constructor(data: {\n    productQty: number;\n    productSku: string;\n    productName: string;\n    cartId: string;\n    cartCode: string;\n    categories: Array<string>;\n    productCategoryName: string;\n    productCategory: string;\n  }) {\n    this.data = data;\n  }\n}\n\nexport class CartSnapshotPushEvent implements ProfileTagPushEvent {\n  name = 'CartSnapshot';\n  data: any;\n  constructor(data: { cart: Cart }) {\n    this.data = data;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { BaseSiteService, WindowRef } from '@spartacus/core';\nimport { fromEvent, merge, Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  shareReplay,\n  tap,\n} from 'rxjs/operators';\nimport { CdsConfig } from '../../config/index';\nimport {\n  ConsentReferenceEvent,\n  DebugEvent,\n  InternalProfileTagEventNames,\n  ProfileTagJsConfig,\n  ProfileTagPushEvent,\n  ProfileTagWindowObject,\n} from '../model/profile-tag.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileTagEventService {\n  latestConsentReference = null;\n  profileTagDebug = false;\n  private consentReference$: Observable<string | null>;\n  private profileTagWindow: ProfileTagWindowObject;\n  private profileTagEvents$ = merge(\n    this.setConsentReference(),\n    this.debugModeChanged()\n  );\n  constructor(\n    private winRef: WindowRef,\n    private config: CdsConfig,\n    private baseSiteService: BaseSiteService,\n    @Inject(PLATFORM_ID) private platform: any\n  ) {\n    this.initWindow();\n  }\n\n  getProfileTagEvents(): Observable<string | DebugEvent | Event> {\n    return this.profileTagEvents$;\n  }\n\n  getConsentReference(): Observable<string> {\n    if (!this.consentReference$) {\n      this.consentReference$ = fromEvent(\n        this.winRef.nativeWindow,\n        InternalProfileTagEventNames.CONSENT_REFERENCE_LOADED\n      ).pipe(\n        map((event) => <ConsentReferenceEvent>event),\n        map((event) => event.detail.consentReference),\n        shareReplay(1)\n      );\n    }\n    return this.consentReference$;\n  }\n\n  handleConsentWithdrawn(): void {\n    this.consentReference$ = null;\n    this.latestConsentReference = null;\n  }\n\n  addTracker(): Observable<string> {\n    return this.baseSiteService.getActive().pipe(\n      filter(() => isPlatformBrowser(this.platform)),\n      filter((siteId: string) => Boolean(siteId)),\n      distinctUntilChanged(),\n      tap(() => this.addScript()),\n      tap((siteId: string) => this.createConfig(siteId))\n    );\n  }\n\n  notifyProfileTagOfEventOccurence(event: ProfileTagPushEvent): void {\n    try {\n      this.profileTagWindow.Y_TRACKING.eventLayer.push(event);\n    } catch (e) {\n      console.log(`Unexpected error when calling profiletag push method ${e}`);\n    }\n  }\n\n  private setConsentReference(): Observable<string> {\n    return this.getConsentReference().pipe(\n      tap(\n        (consentReference) => (this.latestConsentReference = consentReference)\n      )\n    );\n  }\n\n  private debugModeChanged(): Observable<DebugEvent> {\n    return fromEvent(\n      this.winRef.nativeWindow,\n      InternalProfileTagEventNames.DEBUG_FLAG_CHANGED\n    ).pipe(\n      map((event) => <DebugEvent>event),\n      tap((event) => (this.profileTagDebug = event.detail.debug))\n    );\n  }\n\n  private createConfig(siteId: string): void {\n    const newConfig: ProfileTagJsConfig = {\n      ...this.config.cds.profileTag,\n      tenant: this.config.cds.tenant,\n      siteId,\n      spa: true,\n    };\n    this.exposeConfig(newConfig);\n  }\n\n  /*\n   * Checks if the script with the given source exists in the document or not.\n   */\n  private isScriptLoaded(scriptSource: string): boolean {\n    return !!this.winRef.document.querySelector(\n      `script[src=\"${scriptSource}\"]`\n    );\n  }\n\n  private addScript(): void {\n    if (this.isScriptLoaded(this.config.cds.profileTag.javascriptUrl)) {\n      return;\n    }\n    const profileTagScript = this.winRef.document.createElement('script');\n    profileTagScript.type = 'text/javascript';\n    profileTagScript.async = true;\n    profileTagScript.src = this.config.cds.profileTag.javascriptUrl;\n    this.winRef.document\n      .getElementsByTagName('head')[0]\n      .appendChild(profileTagScript);\n  }\n\n  private initWindow(): void {\n    if (!isPlatformBrowser(this.platform)) {\n      return;\n    }\n    this.profileTagWindow = <ProfileTagWindowObject>(\n      (<unknown>this.winRef.nativeWindow)\n    );\n    this.profileTagWindow.Y_TRACKING = this.profileTagWindow.Y_TRACKING || {};\n    this.profileTagWindow.Y_TRACKING.eventLayer =\n      this.profileTagWindow.Y_TRACKING.eventLayer || [];\n  }\n\n  private exposeConfig(options: ProfileTagJsConfig): void {\n    const q = this.profileTagWindow.Y_TRACKING.q || [];\n    if (q.length !== 0) {\n      return;\n    }\n    q.push([options]);\n    this.profileTagWindow.Y_TRACKING.q = q;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { CdsBackendNotificationAdapter } from '../adapters/cds-backend-notification-adapter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdsBackendConnector {\n  constructor(\n    private cdsBackendNotificationAdapter: CdsBackendNotificationAdapter\n  ) {}\n  notifySuccessfulLogin(): Observable<void> {\n    return this.cdsBackendNotificationAdapter.notifySuccessfulLogin();\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { ActionsSubject } from '@ngrx/store';\nimport { AuthActions, ConsentService, isNotUndefined } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, mapTo } from 'rxjs/operators';\nimport { CdsConfig } from '../../config/cds-config';\nimport { ConsentChangedPushEvent } from '../model/profile-tag.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileTagLifecycleService {\n  constructor(\n    protected consentService: ConsentService,\n    protected config: CdsConfig,\n    protected actionsSubject: ActionsSubject\n  ) {}\n\n  consentChanged(): Observable<ConsentChangedPushEvent> {\n    return this.consentService\n      .getConsent(this.config.cds?.consentTemplateId ?? '')\n      .pipe(\n        filter(isNotUndefined),\n        map((profileConsent) => {\n          return this.consentService.isConsentGiven(profileConsent);\n        }),\n        map((granted) => {\n          return new ConsentChangedPushEvent(granted);\n        })\n      );\n  }\n\n  loginSuccessful(): Observable<boolean> {\n    return this.actionsSubject.pipe(\n      filter((action) => action.type === AuthActions.LOGIN),\n      mapTo(true)\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { merge, Observable } from 'rxjs';\nimport { mapTo, switchMap } from 'rxjs/operators';\nimport { CdsBackendConnector } from '../connectors/cds-backend-connector';\nimport { ProfileTagLifecycleService } from './profile-tag-lifecycle.service';\nimport { ProfileTagEventService } from './profiletag-event.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileTagInjectorService {\n  constructor(\n    private profileTagEventTracker: ProfileTagEventService,\n    private cdsBackendConnector: CdsBackendConnector,\n    private profileTagLifecycleService: ProfileTagLifecycleService\n  ) {}\n\n  track(): Observable<boolean> {\n    return this.profileTagEventTracker\n      .addTracker()\n      .pipe(\n        switchMap((_) =>\n          merge(\n            this.profileTagEventTracker.getProfileTagEvents(),\n            this.notifyEcOfLoginSuccessful()\n          ).pipe(mapTo(true))\n        )\n      );\n  }\n\n  private notifyEcOfLoginSuccessful(): Observable<boolean> {\n    return this.profileTagLifecycleService.loginSuccessful().pipe(\n      switchMap((_) => {\n        return this.cdsBackendConnector\n          .notifySuccessfulLogin()\n          .pipe(mapTo(true));\n      })\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ProfileTagInjectorService } from '../services/profile-tag.injector.service';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  selector: 'cx-profiletag',\n  template: `\n    <ng-container *ngIf=\"profileTagEnabled$ | async\"></ng-container>\n  `,\n})\nexport class ProfileTagComponent {\n  profileTagEnabled$: Observable<boolean> = this.profileTagInjector.track();\n  constructor(private profileTagInjector: ProfileTagInjectorService) {}\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  CmsConfig,\n  DeferLoadingStrategy,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { ProfileTagComponent } from './profile-tag.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProfileTagComponent: {\n          component: ProfileTagComponent,\n          deferLoading: DeferLoadingStrategy.INSTANT,\n        },\n      },\n    }),\n  ],\n  exports: [ProfileTagComponent],\n  declarations: [ProfileTagComponent],\n})\nexport class ProfileTagCmsModule {}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './profile-tag-cms.module';\nexport * from './profile-tag.component';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cds-backend-connector';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest,\n} from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { OccEndpointsService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ProfileTagEventService } from '../services/profiletag-event.service';\n\n@Injectable({ providedIn: 'root' })\nexport class ConsentReferenceInterceptor implements HttpInterceptor {\n  constructor(\n    private profileTagEventTracker: ProfileTagEventService,\n    private occEndpoints: OccEndpointsService\n  ) {}\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (\n      !this.profileTagEventTracker.latestConsentReference ||\n      !this.isOccUrl(request.url)\n    ) {\n      return next.handle(request);\n    }\n    const cdsHeaders = request.headers.set(\n      'X-Consent-Reference',\n      this.profileTagEventTracker.latestConsentReference\n    );\n    const cdsRequest = request.clone({ headers: cdsHeaders });\n    return next.handle(cdsRequest);\n  }\n\n  private isOccUrl(url: string): boolean {\n    return url.includes(this.occEndpoints.getBaseUrl());\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest,\n} from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { OccEndpointsService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ProfileTagEventService } from '../services/profiletag-event.service';\n\n@Injectable({ providedIn: 'root' })\nexport class DebugInterceptor implements HttpInterceptor {\n  constructor(\n    private profileTagEventTracker: ProfileTagEventService,\n    private occEndpoints: OccEndpointsService\n  ) {}\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (!this.isOccUrl(request.url)) {\n      return next.handle(request);\n    }\n    const cdsHeaders = request.headers.set(\n      'X-Profile-Tag-Debug',\n      this.profileTagEventTracker.profileTagDebug.toString()\n    );\n    const cdsRequest = request.clone({ headers: cdsHeaders });\n    return next.handle(cdsRequest);\n  }\n\n  private isOccUrl(url: string): boolean {\n    return url.includes(this.occEndpoints.getBaseUrl());\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './consent-reference-interceptor';\nexport * from './debug-interceptor';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './profile-tag.model';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { CdsBackendNotificationAdapter } from './adapters/cds-backend-notification-adapter';\nimport { OccBackendNotification } from './adapters/occ-backend-notification-adapter';\nimport { ProfileTagCmsModule } from './cms-components/profile-tag-cms.module';\nimport { ConsentReferenceInterceptor } from './http-interceptors/consent-reference-interceptor';\nimport { DebugInterceptor } from './http-interceptors/debug-interceptor';\n\n@NgModule({\n  imports: [ProfileTagCmsModule],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useExisting: ConsentReferenceInterceptor,\n      multi: true,\n    },\n    { provide: HTTP_INTERCEPTORS, useExisting: DebugInterceptor, multi: true },\n    {\n      provide: CdsBackendNotificationAdapter,\n      useClass: OccBackendNotification,\n    },\n  ],\n})\nexport class ProfileTagModule {}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport {\n  ActiveCartFacade,\n  CartAddEntrySuccessEvent,\n  CartPageEvent,\n  CartRemoveEntrySuccessEvent,\n  CartUpdateEntrySuccessEvent,\n} from '@spartacus/cart/base/root';\nimport { Category, EventService } from '@spartacus/core';\nimport { OrderPlacedEvent } from '@spartacus/order/root';\nimport {\n  CategoryPageResultsEvent,\n  HomePageEvent,\n  PageEvent,\n  ProductDetailsPageEvent,\n  SearchPageResultsEvent,\n} from '@spartacus/storefront';\nimport { PersonalizationContextService } from '@spartacus/tracking/personalization/core';\nimport { merge, Observable, of } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  distinctUntilKeyChanged,\n  map,\n  mapTo,\n  pairwise,\n  startWith,\n  switchMapTo,\n  withLatestFrom,\n} from 'rxjs/operators';\nimport {\n  AddedToCartPushEvent,\n  CartSnapshotPushEvent,\n  CartViewPushEvent,\n  CategoryViewPushEvent,\n  HomePageViewPushEvent,\n  KeywordSearchPushEvent,\n  ModifiedCartPushEvent,\n  NavigatedPushEvent,\n  OrderConfirmationPushEvent,\n  ProductViewPushEvent,\n  ProfileTagPushEvent,\n  RemovedFromCartPushEvent,\n} from '../model/profile-tag.model';\n\n/**\n * A service to convert spartacus events into profiletag push events that can be picked up and processed by profiletag.\n * The service observes the event service and the active cart service for supported events. These events are parsed into\n * a profiletag compliant format and enriched by segments and actions from the latest personalization context.\n *\n * Currently supported events from the event service:\n *  - CartPageVisited\n *  - CategoryPageVisited\n *  - HomePageVisited\n *  - KeywordSearchPageVisited\n *  - OrderConfirmationPageVisited\n *  - PageVisited\n *  - ProductDetailsPageVisited\n *  - CartAddEntrySuccessEvent\n *  - CartRemoveEntrySuccessEvent\n *  - CartUpdateEntrySuccessEvent\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileTagPushEventsService {\n  private pushEvents$: Observable<ProfileTagPushEvent> = merge(\n    this.categoryPageVisited(),\n    this.productDetailsPageView(),\n    this.searchResultsChanged(),\n    this.homePageVisitedEvent(),\n    this.cartPageVisitedEvent(),\n    this.navigatedEvent(),\n    this.orderConfirmationPageVisited(),\n    this.addedToCart(),\n    this.removedFromCart(),\n    this.modifiedCart(),\n    this.cartChangedEvent()\n  );\n\n  constructor(\n    protected eventService: EventService,\n    protected personalizationContextService: PersonalizationContextService,\n    protected activeCartFacade: ActiveCartFacade\n  ) {}\n\n  /**\n   * Returns a push event emitting observable that emits all converted events emitted by the event or the active cart service.\n   * These events are enriched with segments and actions from the latest personalization context.\n   *\n   * @returns an observable emitting profiletag push events\n   */\n  getPushEvents(): Observable<ProfileTagPushEvent> {\n    return this.pushEvents$.pipe(\n      withLatestFrom(\n        merge(\n          of({ segments: undefined, actions: undefined }),\n          this.personalizationContextService.getPersonalizationContext()\n        )\n      ),\n      map(([item, personalizationContext]) => {\n        item.data = item.data ? item.data : {};\n        item.data.segments = personalizationContext?.segments;\n        item.data.actions = personalizationContext?.actions;\n        return item;\n      })\n    );\n  }\n\n  /**\n   * Adds a new push event emitting observable to this service. This observable will be merged with the internal one.\n   * This method can be used to extend the functionality of this service at runtime.\n   *\n   * @param event an observable emitting profiltag push events\n   */\n  addPushEvent(event: Observable<ProfileTagPushEvent>): void {\n    this.pushEvents$ = merge(this.pushEvents$, event);\n  }\n\n  /**\n   * Emits the category page visited event.\n   *\n   * @returns an observable emitting events that describe category page visits in a profiltag compliant way\n   * @see CategoryPageResultsEvent\n   * @see CategoryViewPushEvent\n   */\n\n  protected categoryPageVisited(): Observable<ProfileTagPushEvent> {\n    return this.eventService.get(CategoryPageResultsEvent).pipe(\n      withLatestFrom(\n        this.eventService.get(PageEvent).pipe(\n          startWith(<PageEvent>null), // https://github.com/ReactiveX/rxjs/issues/4772\n          pairwise()\n        )\n      ),\n      distinctUntilChanged(\n        (\n          [previouslyEmittedCategoryPage],\n          [currentCategoryPage, [previousRoute, currentRoute]]\n        ) => {\n          return (\n            previouslyEmittedCategoryPage.categoryCode ===\n              currentCategoryPage.categoryCode &&\n            previousRoute.navigation.semanticRoute ===\n              currentRoute.navigation.semanticRoute\n          ); // A true means that this item is not unique, so this is hard to wrap your head around.\n          // What we are saying, is that if the categoryCode is the same AND the last emitted semantic route is the same\n          // then this is a duplicate (I.E. via a facet change). In other words, no other page type was visited, and we are on the same categorycode\n        }\n      ),\n      map(\n        ([categoryPageEvent]) =>\n          new CategoryViewPushEvent({\n            productCategory: categoryPageEvent.categoryCode,\n            productCategoryName: categoryPageEvent.categoryName,\n          })\n      )\n    );\n  }\n\n  /**\n   * Listens to SearchPageResultsEvent events\n   *\n   * @returns an observable emitting events that describe keyword search page visits in a profiltag compliant way\n   * @see SearchPageResultsEvent\n   * @see KeywordSearchPushEvent\n   */\n  protected searchResultsChanged(): Observable<ProfileTagPushEvent> {\n    return this.eventService.get(SearchPageResultsEvent).pipe(\n      distinctUntilKeyChanged('searchTerm'),\n      map(\n        (searchEvent) =>\n          new KeywordSearchPushEvent({\n            searchTerm: searchEvent.searchTerm,\n            numResults: searchEvent.numberOfResults,\n          })\n      )\n    );\n  }\n\n  /**\n   * Listens to ProductDetailsPageEvent events\n   *\n   * @returns an observable emitting events that describe product detail page visits in a profiltag compliant way\n   * @see ProductDetailsPageEvent\n   * @see ProductViewPushEvent\n   */\n  protected productDetailsPageView(): Observable<ProfileTagPushEvent> {\n    return this.eventService.get(ProductDetailsPageEvent).pipe(\n      map(\n        (item) =>\n          new ProductViewPushEvent({\n            productSku: item.code,\n            productName: item.name,\n            productPrice: item.price ? item.price.value : undefined,\n            productCategoryName: item.categories\n              ? item.categories[item.categories.length - 1].name\n              : undefined,\n            productCategory: item.categories\n              ? item.categories[item.categories.length - 1].code\n              : undefined,\n            categories: this.categoriesToIds(item.categories),\n          })\n      )\n    );\n  }\n\n  /**\n   * Listens to PageVisited events\n   *\n   * @returns an observable emitting events that describe page visits in a profiltag compliant way\n   * @see PageVisited\n   * @see NavigatedPushEvent\n   */\n  protected navigatedEvent(): Observable<ProfileTagPushEvent> {\n    return this.eventService\n      .get(PageEvent)\n      .pipe(mapTo(new NavigatedPushEvent()));\n  }\n\n  /**\n   * Listens to CartPageVisited events\n   *\n   * @returns an observable emitting events that describe cart page visits in a profiltag compliant way\n   * @see CartPageVisited\n   * @see CartViewPushEvent\n   */\n  protected cartPageVisitedEvent(): Observable<ProfileTagPushEvent> {\n    return this.eventService\n      .get(CartPageEvent)\n      .pipe(mapTo(new CartViewPushEvent()));\n  }\n\n  /**\n   * Listens to HomePageEvent events\n   *\n   * @returns an observable emitting events that describe home page visits in a profiltag compliant way\n   * @see HomePageEvent\n   * @see HomePageViewPushEvent\n   */\n  protected homePageVisitedEvent(): Observable<ProfileTagPushEvent> {\n    return this.eventService\n      .get(HomePageEvent)\n      .pipe(mapTo(new HomePageViewPushEvent()));\n  }\n\n  /**\n   * Listens to OrderPlacedEvent events\n   *\n   * @returns an observable emitting events that describe order confirmation page visits in a profiltag compliant way\n   * @see OrderPlacedEvent\n   * @see OrderConfirmationPushEvent\n   */\n  protected orderConfirmationPageVisited(): Observable<ProfileTagPushEvent> {\n    return this.eventService\n      .get(OrderPlacedEvent)\n      .pipe(mapTo(new OrderConfirmationPushEvent()));\n  }\n\n  /**\n   * Listens to @CartAddEntrySuccessEvent events, transforms them to @AddedToCartPushEvent .\n   *\n   * @returns an observable emitting @AddedToCartPushEvent events\n   * @see CartAddEntrySuccessEvent\n   * @see AddedToCartPushEvent\n   */\n  protected addedToCart(): Observable<ProfileTagPushEvent> {\n    return this.eventService.get(CartAddEntrySuccessEvent).pipe(\n      map(\n        (item) =>\n          new AddedToCartPushEvent({\n            productQty: item.quantityAdded,\n            productSku: item.entry.product.code,\n            productName: item.entry.product.name,\n            cartId: item.cartId,\n            cartCode: item.cartCode,\n            productPrice: this.getProductPrice(item),\n            categories: this.categoriesToIds(item.entry.product.categories),\n            productCategoryName: item.entry.product.categories\n              ? item.entry.product.categories[\n                  item.entry.product.categories.length - 1\n                ].name\n              : undefined,\n            productCategory: item.entry.product.categories\n              ? item.entry.product.categories[\n                  item.entry.product.categories.length - 1\n                ].code\n              : undefined,\n          })\n      )\n    );\n  }\n\n  /**\n   * Listens to @CartRemoveEntrySuccessEvent events, transforms them to @RemovedFromCartPushEvent\n   *\n   * @returns an observable emitting @RemovedFromCartPushEvent events\n   * @see CartRemoveEntrySuccessEvent\n   * @see RemovedFromCartPushEvent\n   */\n  protected removedFromCart(): Observable<ProfileTagPushEvent> {\n    return this.eventService.get(CartRemoveEntrySuccessEvent).pipe(\n      map(\n        (item) =>\n          new RemovedFromCartPushEvent({\n            productSku: item.entry.product.code,\n            productName: item.entry.product.name,\n            cartId: item.cartId,\n            cartCode: item.cartCode,\n            productCategoryName: item.entry.product.categories\n              ? item.entry.product.categories[\n                  item.entry.product.categories.length - 1\n                ].name\n              : undefined,\n            productCategory: item.entry.product.categories\n              ? item.entry.product.categories[\n                  item.entry.product.categories.length - 1\n                ].code\n              : undefined,\n            categories: this.categoriesToIds(item.entry.product.categories),\n          })\n      )\n    );\n  }\n\n  /**\n   * Listens to @CartUpdateEntrySuccessEvent events, transforms them to @ModifiedCartPushEvent\n   *\n   * @returns an observable emitting @ModifiedCartPushEvent events\n   * @see CartUpdateEntrySuccessEvent\n   * @see ModifiedCartPushEvent\n   */\n  protected modifiedCart(): Observable<ProfileTagPushEvent> {\n    return this.eventService.get(CartUpdateEntrySuccessEvent).pipe(\n      map(\n        (item) =>\n          new ModifiedCartPushEvent({\n            productQty: item.quantity,\n            productSku: item.entry.product.code,\n            productName: item.entry.product.name,\n            cartId: item.cartId,\n            cartCode: item.cartCode,\n            categories: this.categoriesToIds(item.entry.product.categories),\n            productCategoryName: item.entry.product.categories\n              ? item.entry.product.categories[\n                  item.entry.product.categories.length - 1\n                ].name\n              : undefined,\n            productCategory: item.entry.product.categories\n              ? item.entry.product.categories[\n                  item.entry.product.categories.length - 1\n                ].code\n              : undefined,\n          })\n      )\n    );\n  }\n\n  /**\n   * Listens to @CartAddEntrySuccessEvent , @CartUpdateEntrySuccessEvent and @CartRemoveEntrySuccessEvent events,\n   * transforms them to @CartSnapshotPushEvent whenever there is an activity on the cart.\n   *\n   * @returns an observable emitting @CartSnapshotPushEvent events\n   * @see CartAddEntrySuccessEvent\n   * @see CartUpdateEntrySuccessEvent\n   * @see CartRemoveEntrySuccessEvent\n   * @see CartSnapshotPushEvent\n   */\n  protected cartChangedEvent(): Observable<ProfileTagPushEvent> {\n    return merge(\n      this.eventService.get(CartAddEntrySuccessEvent),\n      this.eventService.get(CartUpdateEntrySuccessEvent),\n      this.eventService.get(CartRemoveEntrySuccessEvent)\n    ).pipe(\n      switchMapTo(this.activeCartFacade.takeActive()),\n      map(\n        (cart) =>\n          new CartSnapshotPushEvent({\n            cart,\n          })\n      )\n    );\n  }\n\n  private getProductPrice(event: CartAddEntrySuccessEvent): Number {\n    if (\n      !event.entry.totalPrice ||\n      !event.entry.totalPrice.value ||\n      !event.entry.quantity\n    ) {\n      return undefined;\n    }\n    return parseFloat(\n      (event.entry.totalPrice.value / event.entry.quantity).toFixed(2)\n    );\n  }\n  private categoriesToIds(categories: Array<Category>): Array<string> {\n    return categories.map((category) => category.code);\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './profile-tag-lifecycle.service';\nexport * from './profile-tag-push-events.service';\nexport * from './profile-tag.injector.service';\nexport * from './profiletag-event.service';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { filter, tap, withLatestFrom } from 'rxjs/operators';\nimport { ProfileTagLifecycleService } from '../services/profile-tag-lifecycle.service';\nimport { ProfileTagPushEventsService } from '../services/profile-tag-push-events.service';\nimport { ProfileTagEventService } from '../services/profiletag-event.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TrackingService {\n  constructor(\n    protected profileTagLifecycleService: ProfileTagLifecycleService,\n    protected profileTagPushEventsService: ProfileTagPushEventsService,\n    private profileTagEventTracker: ProfileTagEventService\n  ) {}\n  static factory(trackingService: TrackingService): () => void {\n    const factoryFunction = () => {\n      trackingService.trackEvents();\n    };\n    return factoryFunction;\n  }\n  trackEvents(): void {\n    this.profileTagPushEventsService\n      .getPushEvents()\n      .pipe(\n        withLatestFrom(\n          this.profileTagLifecycleService.consentChanged().pipe(\n            tap((event) => {\n              // always notify of consent changes\n              this.profileTagEventTracker.notifyProfileTagOfEventOccurence(\n                event\n              );\n            })\n          )\n        ),\n        filter(([_event, consentChanged]) => consentChanged.data.granted), //don't notify other events until consent is granted\n        tap(([event]) => {\n          this.profileTagEventTracker.notifyProfileTagOfEventOccurence(event);\n        })\n      )\n      .subscribe();\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { TrackingService } from './tracking.service';\n\n@NgModule({\n  providers: [\n    {\n      multi: true,\n      provide: APP_INITIALIZER,\n      useFactory: TrackingService.factory,\n      deps: [TrackingService],\n    },\n  ],\n})\nexport class TrackingModule {}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './tracking.module';\nexport * from './tracking.service';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './adapters/index';\nexport * from './cms-components/index';\nexport * from './connectors/index';\nexport * from './http-interceptors/index';\nexport * from './model/index';\nexport * from './profile-tag.module';\nexport * from './services/index';\nexport * from './tracking/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport {\n  PageType,\n  ProductSearchService,\n  RoutingService,\n  ProductSearchPage,\n} from '@spartacus/core';\nimport { FacetService, FacetList } from '@spartacus/storefront';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  map,\n  startWith,\n  switchMap,\n} from 'rxjs/operators';\nimport {\n  ProfileTagEventService,\n  ProfileTagLifecycleService,\n} from '../../profiletag';\nimport { MerchandisingUserContext } from '../model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdsMerchandisingUserContextService {\n  constructor(\n    private routingService: RoutingService,\n    private productSearchService: ProductSearchService,\n    private profileTagEventService: ProfileTagEventService,\n    private profileTagLifecycleService: ProfileTagLifecycleService,\n    private facetService: FacetService\n  ) {}\n\n  getUserContext(): Observable<MerchandisingUserContext> {\n    return combineLatest([\n      this.getConsentReferenceContext(),\n      this.getPageContext(),\n      this.getSearchContext(),\n    ]).pipe(\n      map(([consentContext, pageContext, searchContext]) => {\n        const result = {\n          ...consentContext,\n          ...pageContext,\n        };\n\n        if (!pageContext.products) {\n          result['facets'] = searchContext.facets;\n          result['searchPhrase'] = searchContext.searchPhrase;\n        }\n\n        return result;\n      }),\n      distinctUntilChanged(\n        (prev, curr) =>\n          prev.facets === curr.facets &&\n          prev.searchPhrase === curr.searchPhrase &&\n          prev.consentReference === curr.consentReference &&\n          prev.category === curr.category &&\n          prev.products === curr.products\n      )\n    );\n  }\n\n  private getConsentReferenceContext(): Observable<MerchandisingUserContext> {\n    return this.profileTagLifecycleService.consentChanged().pipe(\n      switchMap((changed) => {\n        if (changed.data.granted) {\n          return this.profileTagEventService\n            .getConsentReference()\n            .pipe(map((consentReference) => ({ consentReference })));\n        } else {\n          this.profileTagEventService.handleConsentWithdrawn();\n          return of({ consentReference: '' });\n        }\n      })\n    );\n  }\n\n  private getPageContext(): Observable<MerchandisingUserContext> {\n    return this.routingService.getPageContext().pipe(\n      map((pageContext) => {\n        const result = {} as MerchandisingUserContext;\n\n        if (pageContext.type === PageType.PRODUCT_PAGE) {\n          result.products = [pageContext.id];\n        } else if (pageContext.type === PageType.CATEGORY_PAGE) {\n          result.category = pageContext.id;\n        }\n        return result;\n      })\n    );\n  }\n\n  private getSearchContext(): Observable<MerchandisingUserContext> {\n    return combineLatest([\n      this.productSearchService\n        .getResults()\n        .pipe(startWith({} as ProductSearchPage)),\n      this.facetService.facetList$.pipe(startWith({} as FacetList)),\n    ]).pipe(\n      map(([searchResult, facetList]) => {\n        const facets = facetList?.activeFacets\n          ?.map((facet) => `${facet.facetCode}:${facet.facetValueCode}`)\n          .join(':');\n\n        return {\n          facets: facets || undefined,\n          searchPhrase: searchResult.freeTextSearch || undefined,\n        } as MerchandisingUserContext;\n      }),\n      distinctUntilChanged(\n        (prev, curr) =>\n          prev.facets === curr.facets && prev.searchPhrase === curr.searchPhrase\n      )\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { BaseSiteService, LanguageService } from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { MerchandisingSiteContext } from '../model/merchandising-site-context.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdsMerchandisingSiteContextService {\n  constructor(\n    protected baseSiteService: BaseSiteService,\n    protected languageService: LanguageService\n  ) {}\n\n  getSiteContext(): Observable<MerchandisingSiteContext> {\n    return combineLatest([\n      this.baseSiteService.getActive(),\n      this.languageService.getActive(),\n    ]).pipe(\n      map(([site, language]: [string, string]) => {\n        const siteContext: MerchandisingSiteContext = {\n          site,\n          language,\n        };\n        return siteContext;\n      })\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { debounceTime, map, mergeMap } from 'rxjs/operators';\nimport {\n  MerchandisingUserContext,\n  MerchandisingSiteContext,\n  StrategyResponse,\n} from '../model';\nimport { MerchandisingStrategyConnector } from '../connectors';\nimport { CdsMerchandisingSiteContextService } from './cds-merchandising-site-context.service';\nimport { CdsMerchandisingUserContextService } from './cds-merchandising-user-context.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdsMerchandisingProductService {\n  constructor(\n    protected strategyConnector: MerchandisingStrategyConnector,\n    protected merchandisingUserContextService: CdsMerchandisingUserContextService,\n    protected merchandisingSiteContextService: CdsMerchandisingSiteContextService\n  ) {}\n\n  loadProductsForStrategy(\n    strategyId: string,\n    numberToDisplay?: number\n  ): Observable<StrategyResponse> {\n    return combineLatest([\n      this.merchandisingSiteContextService.getSiteContext(),\n      this.merchandisingUserContextService.getUserContext(),\n    ]).pipe(\n      debounceTime(0),\n      map(\n        ([siteContext, userContext]: [\n          MerchandisingSiteContext,\n          MerchandisingUserContext\n        ]) => {\n          return {\n            queryParams: {\n              ...siteContext,\n\n              products: userContext.products,\n              category: userContext.category,\n              facets: userContext.facets,\n              searchPhrase: userContext.searchPhrase,\n\n              pageSize: numberToDisplay,\n            },\n            headers: {\n              consentReference: userContext.consentReference,\n            },\n          };\n        }\n      ),\n      mergeMap((request) =>\n        this.strategyConnector\n          .loadProductsForStrategy(strategyId, request)\n          .pipe(map((products) => ({ request, products })))\n      )\n    );\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cds-merchandising-product.service';\nexport * from './cds-merchandising-site-context.service';\nexport * from './cds-merchandising-user-context.service';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { ProductService } from '@spartacus/core';\nimport { EMPTY, Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport { CmsMerchandisingCarouselComponent } from '../../../cds-models';\nimport { CdsConfig } from '../../../config';\nimport { ProfileTagEventService } from '../../../profiletag';\nimport { CdsMerchandisingProductService } from '../../facade';\nimport {\n  MerchandisingMetadata,\n  MerchandisingProduct,\n  StrategyProduct,\n  StrategyProducts,\n} from '../../model';\nimport {\n  CarouselEvent,\n  MerchandisingCarouselClickedEvent,\n  MerchandisingCarouselModel,\n  MerchandisingCarouselViewedEvent,\n} from './model';\nimport { StrategyRequest } from '../../../cds-models';\n\nconst DEFAULT_CAROUSEL_VIEWPORT_THRESHOLD = 80;\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MerchandisingCarouselComponentService {\n  protected readonly PRODUCT_SCOPE = 'details';\n\n  constructor(\n    protected cdsMerchandisingProductService: CdsMerchandisingProductService,\n    protected productService: ProductService,\n    protected profileTagEventService: ProfileTagEventService,\n    protected cdsConfig: CdsConfig\n  ) {}\n\n  getMerchandisingCaourselViewportThreshold(\n    cmsComponent: CmsMerchandisingCarouselComponent\n  ): number {\n    const viewportPercentage =\n      cmsComponent.viewportPercentage ??\n      this.cdsConfig?.cds?.merchandising?.defaultCarouselViewportThreshold ??\n      DEFAULT_CAROUSEL_VIEWPORT_THRESHOLD;\n\n    return viewportPercentage / 100;\n  }\n\n  getMerchandisingCarouselModel(\n    cmsComponent: CmsMerchandisingCarouselComponent\n  ): Observable<MerchandisingCarouselModel> {\n    return this.cdsMerchandisingProductService\n      .loadProductsForStrategy(\n        cmsComponent.strategy,\n        cmsComponent.numberToDisplay\n      )\n      .pipe(\n        map((strategy) => {\n          const metadata = this.getCarouselMetadata(\n            strategy.products,\n            cmsComponent\n          );\n          const items$ = this.mapStrategyProductsToCarouselItems(\n            strategy.products\n          );\n          const productIds = this.mapStrategyProductsToProductIds(\n            strategy.products\n          );\n          const id = this.getMerchandisingCarouselModelId(\n            cmsComponent,\n            strategy.request\n          );\n\n          return {\n            id,\n            items$,\n            productIds,\n            metadata,\n            title: cmsComponent.title,\n            backgroundColor: cmsComponent.backgroundColour,\n            textColor: cmsComponent.textColour,\n          };\n        })\n      );\n  }\n\n  sendCarouselViewEvent(\n    lastSendModelId: string,\n    merchandisingCarouselModel$: Observable<MerchandisingCarouselModel>\n  ): Observable<MerchandisingCarouselModel> {\n    return merchandisingCarouselModel$.pipe(\n      filter((model) => model.id !== lastSendModelId),\n      tap((merchandisingCarouselModel) => {\n        const carouselEvent: CarouselEvent =\n          this.getCarouselEventFromCarouselModel(merchandisingCarouselModel);\n        this.profileTagEventService.notifyProfileTagOfEventOccurence(\n          new MerchandisingCarouselViewedEvent(\n            carouselEvent,\n            merchandisingCarouselModel.productIds\n          )\n        );\n      })\n    );\n  }\n\n  sendCarouselItemClickedEvent(\n    merchandisingCarouselModel: MerchandisingCarouselModel,\n    clickedProduct: MerchandisingProduct\n  ): void {\n    const carouselEvent: CarouselEvent = this.getCarouselEventFromCarouselModel(\n      merchandisingCarouselModel\n    );\n\n    carouselEvent.metadata = {\n      ...carouselEvent.metadata,\n      ...clickedProduct.metadata,\n    };\n\n    this.profileTagEventService.notifyProfileTagOfEventOccurence(\n      new MerchandisingCarouselClickedEvent(\n        carouselEvent,\n        clickedProduct.metadata.slot,\n        clickedProduct.code,\n        clickedProduct.images?.PRIMARY['product']?.url\n      )\n    );\n  }\n\n  private getCarouselMetadata(\n    strategyProducts: StrategyProducts,\n    componentData: CmsMerchandisingCarouselComponent\n  ): MerchandisingMetadata {\n    const metadata: MerchandisingMetadata = strategyProducts.metadata ?? {};\n    if (strategyProducts.products && strategyProducts.products.length) {\n      metadata.slots = strategyProducts.products.length;\n    }\n\n    metadata.title = componentData.title;\n    metadata.name = componentData.name;\n    metadata.strategyid = componentData.strategy;\n    metadata.id = componentData.uid;\n\n    return metadata;\n  }\n\n  private mapStrategyProductsToCarouselItems(\n    strategyProducts: StrategyProducts\n  ): Observable<MerchandisingProduct>[] {\n    return strategyProducts && strategyProducts.products\n      ? strategyProducts.products.map((strategyProduct, index) =>\n          this.productService.get(strategyProduct.id, this.PRODUCT_SCOPE).pipe(\n            map((product) => ({\n              ...product,\n              metadata: this.getCarouselItemMetadata(\n                strategyProduct,\n                index + 1\n              ),\n            }))\n          )\n        )\n      : [EMPTY];\n  }\n\n  private mapStrategyProductsToProductIds(\n    strategyProducts: StrategyProducts\n  ): string[] {\n    return strategyProducts && strategyProducts.products\n      ? strategyProducts.products.map((strategyProduct) => strategyProduct.id)\n      : [];\n  }\n\n  private getMerchandisingCarouselModelId(\n    cmsComponent: CmsMerchandisingCarouselComponent,\n    request: StrategyRequest\n  ): string {\n    return (\n      cmsComponent.uid +\n      '_' +\n      cmsComponent.strategy +\n      '_' +\n      JSON.stringify(request.queryParams)\n    );\n  }\n\n  private getCarouselItemMetadata(\n    strategyProduct: StrategyProduct,\n    index: number\n  ): MerchandisingMetadata {\n    const metadata: MerchandisingMetadata = strategyProduct.metadata ?? {};\n\n    metadata.slot = index;\n    metadata.id = strategyProduct.id;\n\n    return metadata;\n  }\n\n  private getCarouselEventFromCarouselModel(\n    carouselModel: MerchandisingCarouselModel\n  ): CarouselEvent {\n    return {\n      carouselId: carouselModel.metadata.id,\n      carouselName: carouselModel.metadata.name,\n      strategyId: carouselModel.metadata.strategyid,\n      metadata: carouselModel.metadata,\n    };\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ChangeDetectionStrategy, Component, ElementRef } from '@angular/core';\nimport { RoutingService } from '@spartacus/core';\nimport { CmsComponentData, IntersectionService } from '@spartacus/storefront';\nimport { Observable, of, using } from 'rxjs';\nimport {\n  distinctUntilKeyChanged,\n  filter,\n  map,\n  shareReplay,\n  switchMap,\n  switchMapTo,\n  take,\n  tap,\n} from 'rxjs/operators';\nimport { CmsMerchandisingCarouselComponent } from '../../../cds-models/cms.model';\nimport { MerchandisingProduct } from '../../model/index';\nimport { MerchandisingCarouselComponentService } from './merchandising-carousel.component.service';\nimport { MerchandisingCarouselModel } from './model/index';\n\n@Component({\n  selector: 'cx-merchandising-carousel',\n  templateUrl: './merchandising-carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MerchandisingCarouselComponent {\n  protected lastEventModelId: string;\n\n  constructor(\n    protected componentData: CmsComponentData<CmsMerchandisingCarouselComponent>,\n    protected merchandisingCarouselComponentService: MerchandisingCarouselComponentService,\n    protected routingService: RoutingService,\n    protected intersectionService: IntersectionService,\n    protected el: ElementRef\n  ) {\n    this.lastEventModelId = '';\n  }\n\n  private fetchProducts$: Observable<MerchandisingCarouselModel> =\n    this.componentData.data$.pipe(\n      filter((data) => Boolean(data)),\n      distinctUntilKeyChanged('strategy'),\n      switchMap((data) =>\n        this.merchandisingCarouselComponentService.getMerchandisingCarouselModel(\n          data\n        )\n      ),\n      tap((data) => {\n        if (typeof data.backgroundColor === 'string') {\n          this.el.nativeElement.style.setProperty(\n            '--cx-color-background',\n            data.backgroundColor\n          );\n        }\n        if (typeof data.textColor === 'string') {\n          this.el.nativeElement.style.setProperty(\n            '--cx-color-text',\n            data.textColor\n          );\n        }\n      }),\n      shareReplay({ bufferSize: 1, refCount: true })\n    );\n\n  private intersection$: Observable<void> = this.fetchProducts$.pipe(\n    take(1),\n    switchMapTo(\n      this.routingService.getPageContext().pipe(\n        switchMapTo(this.componentData.data$),\n        map((data) =>\n          this.merchandisingCarouselComponentService.getMerchandisingCaourselViewportThreshold(\n            data\n          )\n        ),\n        switchMap((threshold) =>\n          this.intersectionService\n            .isIntersected(this.el.nativeElement, {\n              threshold,\n            })\n            .pipe(\n              filter((carouselIsVisible) => carouselIsVisible),\n              switchMap((_) => {\n                return this.merchandisingCarouselComponentService\n                  .sendCarouselViewEvent(\n                    this.lastEventModelId,\n                    this.fetchProducts$\n                  )\n                  .pipe(\n                    tap((model) => {\n                      this.lastEventModelId = model.id;\n                    }),\n                    switchMapTo(of())\n                  );\n              })\n            )\n        )\n      )\n    )\n  );\n\n  merchandisingCarouselModel$ = using(\n    () => this.intersection$.subscribe(),\n    () => this.fetchProducts$\n  );\n\n  onMerchandisingCarouselItemClick(\n    merchandisingCarouselModel: MerchandisingCarouselModel,\n    clickedProduct: MerchandisingProduct\n  ): void {\n    this.merchandisingCarouselComponentService.sendCarouselItemClickedEvent(\n      merchandisingCarouselModel,\n      clickedProduct\n    );\n  }\n}\n","<ng-container\n  *ngIf=\"merchandisingCarouselModel$ | async as merchandisingCarouselModel\"\n>\n  <div\n    class=\"data-cx-merchandising-carousel\"\n    [cxAttributes]=\"merchandisingCarouselModel.metadata\"\n    [cxAttributesNamePrefix]=\"'data-cx-merchandising-carousel'\"\n  ></div>\n  <cx-carousel\n    [items]=\"merchandisingCarouselModel.items$\"\n    [title]=\"merchandisingCarouselModel.title\"\n    [template]=\"carouselItem\"\n    itemWidth=\"285px\"\n  >\n  </cx-carousel>\n\n  <ng-template #carouselItem let-item=\"item\">\n    <div\n      class=\"data-cx-merchandising-product\"\n      [cxAttributes]=\"item.metadata\"\n      [cxAttributesNamePrefix]=\"'data-cx-merchandising-product'\"\n    ></div>\n    <a\n      tabindex=\"0\"\n      [routerLink]=\"{ cxRoute: 'product', params: item } | cxUrl\"\n      (click)=\"\n        onMerchandisingCarouselItemClick(merchandisingCarouselModel, item)\n      \"\n    >\n      <cx-media\n        *ngIf=\"item.images?.PRIMARY\"\n        [container]=\"item.images.PRIMARY\"\n        format=\"product\"\n      >\n      </cx-media>\n      <h4>{{ item.name }}</h4>\n      <div class=\"price\">\n        {{ item.price?.formattedValue }}\n      </div>\n      <div class=\"price\" *ngIf=\"item.stock?.stockLevel > 0; else outOfStock\">\n        {{ item.stock?.stockLevelStatus }} : {{ item.stock?.stockLevel }}\n      </div>\n      <ng-template #outOfStock>\n        <div class=\"price\">\n          {{ item.stock?.stockLevelStatus }}\n        </div>\n      </ng-template>\n    </a>\n  </ng-template>\n</ng-container>\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig, UrlModule } from '@spartacus/core';\nimport { CarouselModule, MediaModule } from '@spartacus/storefront';\nimport { AttributesModule } from './directives/attributes/attributes.module';\nimport { MerchandisingCarouselComponent } from './merchandising-carousel/merchandising-carousel.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    AttributesModule,\n    CarouselModule,\n    MediaModule,\n    RouterModule,\n    UrlModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MerchandisingCarouselComponent: {\n          component: MerchandisingCarouselComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [MerchandisingCarouselComponent],\n  exports: [MerchandisingCarouselComponent],\n})\nexport class MerchandisingCarouselCmsModule {}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './merchandising-carousel.component';\nexport * from './merchandising-carousel.component.service';\nexport * from './model/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './directives/index';\nexport * from './merchandising-carousel-cms.module';\nexport * from './merchandising-carousel/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { CdsMerchandisingStrategyAdapter } from './adapters';\nimport { MerchandisingCarouselCmsModule } from './cms-components';\nimport { MerchandisingStrategyAdapter } from './connectors';\n\n@NgModule({\n  imports: [MerchandisingCarouselCmsModule],\n  providers: [\n    {\n      provide: MerchandisingStrategyAdapter,\n      useClass: CdsMerchandisingStrategyAdapter,\n    },\n  ],\n})\nexport class MerchandisingModule {}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './merchandising-facet.model';\nexport * from './merchandising-metadata.model';\nexport * from './merchandising-products.model';\nexport * from './merchandising-site-context.model';\nexport * from './merchandising-user-context.model';\nexport * from './strategy-products.model';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './adapters/index';\nexport * from './cms-components/index';\nexport * from './connectors/index';\nexport * from './facade/index';\nexport * from './merchandising.module';\nexport * from './model/index';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { provideConfigValidator, provideDefaultConfig } from '@spartacus/core';\nimport { CdsConfig, cdsConfigValidator, DEFAULT_CDS_CONFIG } from './config';\nimport { MerchandisingModule } from './merchandising';\nimport {\n  ProfileTagModule,\n  ProfileTagPushEventsService,\n  TrackingModule,\n} from './profiletag';\n\n@NgModule({\n  imports: [ProfileTagModule, TrackingModule, MerchandisingModule],\n})\nexport class CdsModule {\n  static forRoot(config?: CdsConfig): ModuleWithProviders<CdsModule> {\n    return {\n      ngModule: CdsModule,\n      providers: [\n        provideDefaultConfig(DEFAULT_CDS_CONFIG),\n        provideDefaultConfig(config),\n        provideConfigValidator(cdsConfigValidator),\n        ProfileTagPushEventsService,\n      ],\n    };\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/*\n * Public API Surface for CDS\n */\nexport * from './src/cds-models/index';\nexport * from './src/cds.module';\nexport * from './src/config/index';\nexport * from './src/merchandising/index';\nexport * from './src/profiletag/index';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.CdsConfig","i1.CdsEndpointsService","i1.MerchandisingStrategyAdapter","i1","i2","i1.CdsBackendNotificationAdapter","i2.CdsConfig","i1.ProfileTagEventService","i2.CdsBackendConnector","i3.ProfileTagLifecycleService","i1.ProfileTagInjectorService","i3","i1.ProfileTagLifecycleService","i2.ProfileTagPushEventsService","i3.ProfileTagEventService","i2.ProfileTagEventService","i2.ProfileTagLifecycleService","i1.MerchandisingStrategyConnector","i2.CdsMerchandisingUserContextService","i3.CdsMerchandisingSiteContextService","i1.CdsMerchandisingProductService","i4.CdsConfig","i2.MerchandisingCarouselComponentService","i4","i5.AttributesDirective"],"mappings":"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"}