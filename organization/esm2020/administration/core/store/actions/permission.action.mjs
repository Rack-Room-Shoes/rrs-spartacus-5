/*
 * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { StateUtils, } from '@spartacus/core';
import { PERMISSION_ENTITIES, PERMISSION_LIST, PERMISSION_TYPES, PERMISSION_TYPES_LIST, } from '../organization-state';
export const LOAD_PERMISSION = '[Permission] Load Permission Data';
export const LOAD_PERMISSION_FAIL = '[Permission] Load Permission Data Fail';
export const LOAD_PERMISSION_SUCCESS = '[Permission] Load Permission Data Success';
export const LOAD_PERMISSIONS = '[Permission] Load Permissions';
export const LOAD_PERMISSIONS_FAIL = '[Permission] Load Permissions Fail';
export const LOAD_PERMISSIONS_SUCCESS = '[Permission] Load Permissions Success';
export const CREATE_PERMISSION = '[Permission] Create Permission';
export const CREATE_PERMISSION_FAIL = '[Permission] Create Permission Fail';
export const CREATE_PERMISSION_SUCCESS = '[Permission] Create Permission Success';
export const UPDATE_PERMISSION = '[Permission] Update Permission';
export const UPDATE_PERMISSION_FAIL = '[Permission] Update Permission Fail';
export const UPDATE_PERMISSION_SUCCESS = '[Permission] Update Permission Success';
export const LOAD_PERMISSION_TYPES = '[Permission Types] Load Permission Types';
export const LOAD_PERMISSION_TYPES_FAIL = '[Permission Types] Load Permission Types Fail';
export const LOAD_PERMISSION_TYPES_SUCCESS = '[Permission Types] Load Permission Types Success';
export class LoadPermission extends StateUtils.EntityLoadAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.permissionCode);
        this.payload = payload;
        this.type = LOAD_PERMISSION;
    }
}
export class LoadPermissionFail extends StateUtils.EntityFailAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.permissionCode, payload.error);
        this.payload = payload;
        this.type = LOAD_PERMISSION_FAIL;
    }
}
export class LoadPermissionSuccess extends StateUtils.EntitySuccessAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, Array.isArray(payload)
            ? payload.map((permission) => permission?.code ?? '')
            : payload?.code ?? '');
        this.payload = payload;
        this.type = LOAD_PERMISSION_SUCCESS;
    }
}
export class LoadPermissions extends StateUtils.EntityLoadAction {
    constructor(payload) {
        super(PERMISSION_LIST, StateUtils.serializeSearchConfig(payload.params));
        this.payload = payload;
        this.type = LOAD_PERMISSIONS;
    }
}
export class LoadPermissionsFail extends StateUtils.EntityFailAction {
    constructor(payload) {
        super(PERMISSION_LIST, StateUtils.serializeSearchConfig(payload.params), payload.error);
        this.payload = payload;
        this.type = LOAD_PERMISSIONS_FAIL;
    }
}
export class LoadPermissionsSuccess extends StateUtils.EntitySuccessAction {
    constructor(payload) {
        super(PERMISSION_LIST, StateUtils.serializeSearchConfig(payload.params));
        this.payload = payload;
        this.type = LOAD_PERMISSIONS_SUCCESS;
    }
}
export class CreatePermission extends StateUtils.EntityLoadAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.permission.code ?? null);
        this.payload = payload;
        this.type = CREATE_PERMISSION;
    }
}
export class CreatePermissionFail extends StateUtils.EntityFailAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.permissionCode, payload.error);
        this.payload = payload;
        this.type = CREATE_PERMISSION_FAIL;
    }
}
export class CreatePermissionSuccess extends StateUtils.EntitySuccessAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.code ?? null, payload);
        this.payload = payload;
        this.type = CREATE_PERMISSION_SUCCESS;
    }
}
export class UpdatePermission extends StateUtils.EntityLoadAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.permission.code ?? '');
        this.payload = payload;
        this.type = UPDATE_PERMISSION;
    }
}
export class UpdatePermissionFail extends StateUtils.EntityFailAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.permissionCode, payload.error);
        this.payload = payload;
        this.type = UPDATE_PERMISSION_FAIL;
    }
}
export class UpdatePermissionSuccess extends StateUtils.EntitySuccessAction {
    constructor(payload) {
        super(PERMISSION_ENTITIES, payload.code ?? '', payload);
        this.payload = payload;
        this.type = UPDATE_PERMISSION_SUCCESS;
    }
}
export class LoadPermissionTypes extends StateUtils.EntityLoadAction {
    constructor() {
        super(PERMISSION_TYPES_LIST, PERMISSION_TYPES);
        this.type = LOAD_PERMISSION_TYPES;
    }
}
export class LoadPermissionTypesFail extends StateUtils.EntityFailAction {
    constructor(payload) {
        super(PERMISSION_TYPES_LIST, PERMISSION_TYPES, payload.error);
        this.payload = payload;
        this.type = LOAD_PERMISSION_TYPES_FAIL;
    }
}
export class LoadPermissionTypesSuccess extends StateUtils.EntitySuccessAction {
    constructor(payload) {
        super(PERMISSION_TYPES_LIST, PERMISSION_TYPES);
        this.payload = payload;
        this.type = LOAD_PERMISSION_TYPES_SUCCESS;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVybWlzc2lvbi5hY3Rpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvcmUvc3RvcmUvYWN0aW9ucy9wZXJtaXNzaW9uLmFjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUlMLFVBQVUsR0FDWCxNQUFNLGlCQUFpQixDQUFDO0FBRXpCLE9BQU8sRUFDTCxtQkFBbUIsRUFDbkIsZUFBZSxFQUNmLGdCQUFnQixFQUNoQixxQkFBcUIsR0FDdEIsTUFBTSx1QkFBdUIsQ0FBQztBQUUvQixNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsbUNBQW1DLENBQUM7QUFDbkUsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsd0NBQXdDLENBQUM7QUFDN0UsTUFBTSxDQUFDLE1BQU0sdUJBQXVCLEdBQ2xDLDJDQUEyQyxDQUFDO0FBRTlDLE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLCtCQUErQixDQUFDO0FBQ2hFLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLG9DQUFvQyxDQUFDO0FBQzFFLE1BQU0sQ0FBQyxNQUFNLHdCQUF3QixHQUFHLHVDQUF1QyxDQUFDO0FBRWhGLE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFHLGdDQUFnQyxDQUFDO0FBQ2xFLE1BQU0sQ0FBQyxNQUFNLHNCQUFzQixHQUFHLHFDQUFxQyxDQUFDO0FBQzVFLE1BQU0sQ0FBQyxNQUFNLHlCQUF5QixHQUNwQyx3Q0FBd0MsQ0FBQztBQUUzQyxNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBRyxnQ0FBZ0MsQ0FBQztBQUNsRSxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxxQ0FBcUMsQ0FBQztBQUM1RSxNQUFNLENBQUMsTUFBTSx5QkFBeUIsR0FDcEMsd0NBQXdDLENBQUM7QUFFM0MsTUFBTSxDQUFDLE1BQU0scUJB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QztDQUNGO0FBRUQsTUFBTSxPQUFPLG1CQUFvQixTQUFRLFVBQVUsQ0FBQyxnQkFBZ0I7SUFFbEU7UUFDRSxLQUFLLENBQUMscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUZ4QyxTQUFJLEdBQUcscUJBQXFCLENBQUM7SUFHdEMsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLHVCQUF3QixTQUFRLFVBQVUsQ0FBQyxnQkFBZ0I7SUFFdEUsWUFBbUIsT0FBWTtRQUM3QixLQUFLLENBQUMscUJBQXFCLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRDdDLFlBQU8sR0FBUCxPQUFPLENBQUs7UUFEdEIsU0FBSSxHQUFHLDBCQUEwQixDQUFDO0lBRzNDLENBQUM7Q0FDRjtBQUVELE1BQU0sT0FBTywwQkFBMkIsU0FBUSxVQUFVLENBQUMsbUJBQW1CO0lBRTVFLFlBQW1CLE9BQXNDO1FBQ3ZELEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1FBRDlCLFlBQU8sR0FBUCxPQUFPLENBQStCO1FBRGhELFNBQUksR0FBRyw2QkFBNkIsQ0FBQztJQUc5QyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMiBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQge1xuICBMaXN0TW9kZWwsXG4gIE9yZGVyQXBwcm92YWxQZXJtaXNzaW9uVHlwZSxcbiAgU2VhcmNoQ29uZmlnLFxuICBTdGF0ZVV0aWxzLFxufSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHsgUGVybWlzc2lvbiB9IGZyb20gJy4uLy4uL21vZGVsL3Blcm1pc3Npb24ubW9kZWwnO1xuaW1wb3J0IHtcbiAgUEVSTUlTU0lPTl9FTlRJVElFUyxcbiAgUEVSTUlTU0lPTl9MSVNULFxuICBQRVJNSVNTSU9OX1RZUEVTLFxuICBQRVJNSVNTSU9OX1RZUEVTX0xJU1QsXG59IGZyb20gJy4uL29yZ2FuaXphdGlvbi1zdGF0ZSc7XG5cbmV4cG9ydCBjb25zdCBMT0FEX1BFUk1JU1NJT04gPSAnW1Blcm1pc3Npb25dIExvYWQgUGVybWlzc2lvbiBEYXRhJztcbmV4cG9ydCBjb25zdCBMT0FEX1BFUk1JU1NJT05fRkFJTCA9ICdbUGVybWlzc2lvbl0gTG9hZCBQZXJtaXNzaW9uIERhdGEgRmFpbCc7XG5leHBvcnQgY29uc3QgTE9BRF9QRVJNSVNTSU9OX1NVQ0NFU1MgPVxuICAnW1Blcm1pc3Npb25dIExvYWQgUGVybWlzc2lvbiBEYXRhIFN1Y2Nlc3MnO1xuXG5leHBvcnQgY29uc3QgTE9BRF9QRVJNSVNTSU9OUyA9ICdbUGVybWlzc2lvbl0gTG9hZCBQZXJtaXNzaW9ucyc7XG5leHBvcnQgY29uc3QgTE9BRF9QRVJNSVNTSU9OU19GQUlMID0gJ1tQZXJtaXNzaW9uXSBMb2FkIFBlcm1pc3Npb25zIEZhaWwnO1xuZXhwb3J0IGNvbnN0IExPQURfUEVSTUlTU0lPTlNfU1VDQ0VTUyA9ICdbUGVybWlzc2lvbl0gTG9hZCBQZXJtaXNzaW9ucyBTdWNjZXNzJztcblxuZXhwb3J0IGNvbnN0IENSRUFURV9QRVJNSVNTSU9OID0gJ1tQZXJtaXNzaW9uXSBDcmVhdGUgUGVybWlzc2lvbic7XG5leHBvcnQgY29uc3QgQ1JFQVRFX1BFUk1JU1NJT05fRkFJTCA9ICdbUGVybWlzc2lvbl0gQ3JlYXRlIFBlcm1pc3Npb24gRmFpbCc7XG5leHBvcnQgY29uc3QgQ1JFQVRFX1BFUk1JU1NJT05fU1VDQ0VTUyA9XG4gICdbUGVybWlzc2lvbl0gQ3JlYXRlIFBlcm1pc3Npb24gU3VjY2Vzcyc7XG5cbmV4cG9ydCBjb25zdCBVUERBVEVfUEVSTUlTU0lPTiA9ICdbUGVybWlzc2lvbl0gVXBkYXRlIFBlcm1pc3Npb24nO1xuZXhwb3J0IGNvbnN0IFVQREFURV9QRVJNSVNTSU9OX0ZBSUwgPSAnW1Blcm1pc3Npb25dIFVwZGF0ZSBQZXJtaXNzaW9uIEZhaWwnO1xuZXhwb3J0IGNvbnN0IFVQREFURV9QRVJNSVNTSU9OX1NVQ0NFU1MgPVxuICAnW1Blcm1pc3Npb25dIFVwZGF0ZSBQZXJtaXNzaW9uIFN1Y2Nlc3MnO1xuXG5leHBvcnQgY29uc3QgTE9BRF9QRVJNSVNTSU9OX1RZUEVTID0gJ1tQZXJtaXNzaW9uIFR5cGVzXSBMb2FkIFBlcm1pc3Npb24gVHlwZXMnO1xuZXhwb3J0IGNvbnN0IExPQURfUEVSTUlTU0lPTl9UWVBFU19GQUlMID1cbiAgJ1tQZXJtaXNzaW9uIFR5cGVzXSBMb2FkIFBlcm1pc3Npb24gVHlwZXMgRmFpbCc7XG5leHBvcnQgY29uc3QgTE9BRF9QRVJNSVNTSU9OX1RZUEVTX1NVQ0NFU1MgPVxuICAnW1Blcm1pc3Npb24gVHlwZXNdIExvYWQgUGVybWlzc2lvbiBUeXBlcyBTdWNjZXNzJztcblxuZXhwb3J0IGNsYXNzIExvYWRQZXJtaXNzaW9uIGV4dGVuZHMgU3RhdGVVdGlscy5FbnRpdHlMb2FkQWN0aW9uIHtcbiAgcmVhZG9ubHkgdHlwZSA9IExPQURfUEVSTUlTU0lPTjtcbiAgY29uc3RydWN0b3IocHVibGljIHBheWxvYWQ6IHsgdXNlcklkOiBzdHJpbmc7IHBlcm1pc3Npb25Db2RlOiBzdHJpbmcgfSkge1xuICAgIHN1cGVyKFBFUk1JU1NJT05fRU5USVRJRVMsIHBheWxvYWQucGVybWlzc2lvbkNvZGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMb2FkUGVybWlzc2lvbkZhaWwgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eUZhaWxBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gTE9BRF9QRVJNSVNTSU9OX0ZBSUw7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwYXlsb2FkOiB7IHBlcm1pc3Npb25Db2RlOiBzdHJpbmc7IGVycm9yOiBhbnkgfSkge1xuICAgIHN1cGVyKFBFUk1JU1NJT05fRU5USVRJRVMsIHBheWxvYWQucGVybWlzc2lvbkNvZGUsIHBheWxvYWQuZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMb2FkUGVybWlzc2lvblN1Y2Nlc3MgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eVN1Y2Nlc3NBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gTE9BRF9QRVJNSVNTSU9OX1NVQ0NFU1M7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwYXlsb2FkOiBQZXJtaXNzaW9uIHwgUGVybWlzc2lvbltdKSB7XG4gICAgc3VwZXIoXG4gICAgICBQRVJNSVNTSU9OX0VOVElUSUVTLFxuICAgICAgQXJyYXkuaXNBcnJheShwYXlsb2FkKVxuICAgICAgICA/IHBheWxvYWQubWFwKChwZXJtaXNzaW9uKSA9PiBwZXJtaXNzaW9uPy5jb2RlID8/ICcnKVxuICAgICAgICA6IHBheWxvYWQ/LmNvZGUgPz8gJydcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMb2FkUGVybWlzc2lvbnMgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eUxvYWRBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gTE9BRF9QRVJNSVNTSU9OUztcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHBheWxvYWQ6IHtcbiAgICAgIHVzZXJJZDogc3RyaW5nO1xuICAgICAgcGFyYW1zOiBTZWFyY2hDb25maWc7XG4gICAgfVxuICApIHtcbiAgICBzdXBlcihQRVJNSVNTSU9OX0xJU1QsIFN0YXRlVXRpbHMuc2VyaWFsaXplU2VhcmNoQ29uZmlnKHBheWxvYWQucGFyYW1zKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIExvYWRQZXJtaXNzaW9uc0ZhaWwgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eUZhaWxBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gTE9BRF9QRVJNSVNTSU9OU19GQUlMO1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcGF5bG9hZDogeyBwYXJhbXM6IFNlYXJjaENvbmZpZzsgZXJyb3I6IGFueSB9KSB7XG4gICAgc3VwZXIoXG4gICAgICBQRVJNSVNTSU9OX0xJU1QsXG4gICAgICBTdGF0ZVV0aWxzLnNlcmlhbGl6ZVNlYXJjaENvbmZpZyhwYXlsb2FkLnBhcmFtcyksXG4gICAgICBwYXlsb2FkLmVycm9yXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTG9hZFBlcm1pc3Npb25zU3VjY2VzcyBleHRlbmRzIFN0YXRlVXRpbHMuRW50aXR5U3VjY2Vzc0FjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBMT0FEX1BFUk1JU1NJT05TX1NVQ0NFU1M7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBwYXlsb2FkOiB7XG4gICAgICBwYWdlOiBMaXN0TW9kZWw7XG4gICAgICBwYXJhbXM6IFNlYXJjaENvbmZpZztcbiAgICB9XG4gICkge1xuICAgIHN1cGVyKFBFUk1JU1NJT05fTElTVCwgU3RhdGVVdGlscy5zZXJpYWxpemVTZWFyY2hDb25maWcocGF5bG9hZC5wYXJhbXMpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ3JlYXRlUGVybWlzc2lvbiBleHRlbmRzIFN0YXRlVXRpbHMuRW50aXR5TG9hZEFjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBDUkVBVEVfUEVSTUlTU0lPTjtcbiAgY29uc3RydWN0b3IocHVibGljIHBheWxvYWQ6IHsgdXNlcklkOiBzdHJpbmc7IHBlcm1pc3Npb246IFBlcm1pc3Npb24gfSkge1xuICAgIHN1cGVyKFBFUk1JU1NJT05fRU5USVRJRVMsIHBheWxvYWQucGVybWlzc2lvbi5jb2RlID8/IG51bGwpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVQZXJtaXNzaW9uRmFpbCBleHRlbmRzIFN0YXRlVXRpbHMuRW50aXR5RmFpbEFjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBDUkVBVEVfUEVSTUlTU0lPTl9GQUlMO1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcGF5bG9hZDogeyBwZXJtaXNzaW9uQ29kZTogc3RyaW5nOyBlcnJvcjogYW55IH0pIHtcbiAgICBzdXBlcihQRVJNSVNTSU9OX0VOVElUSUVTLCBwYXlsb2FkLnBlcm1pc3Npb25Db2RlLCBwYXlsb2FkLmVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ3JlYXRlUGVybWlzc2lvblN1Y2Nlc3MgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eVN1Y2Nlc3NBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gQ1JFQVRFX1BFUk1JU1NJT05fU1VDQ0VTUztcbiAgY29uc3RydWN0b3IocHVibGljIHBheWxvYWQ6IFBlcm1pc3Npb24pIHtcbiAgICBzdXBlcihQRVJNSVNTSU9OX0VOVElUSUVTLCBwYXlsb2FkLmNvZGUgPz8gbnVsbCwgcGF5bG9hZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVwZGF0ZVBlcm1pc3Npb24gZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eUxvYWRBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gVVBEQVRFX1BFUk1JU1NJT047XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBwYXlsb2FkOiB7XG4gICAgICB1c2VySWQ6IHN0cmluZztcbiAgICAgIHBlcm1pc3Npb25Db2RlOiBzdHJpbmc7XG4gICAgICBwZXJtaXNzaW9uOiBQZXJtaXNzaW9uO1xuICAgIH1cbiAgKSB7XG4gICAgc3VwZXIoUEVSTUlTU0lPTl9FTlRJVElFUywgcGF5bG9hZC5wZXJtaXNzaW9uLmNvZGUgPz8gJycpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVcGRhdGVQZXJtaXNzaW9uRmFpbCBleHRlbmRzIFN0YXRlVXRpbHMuRW50aXR5RmFpbEFjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBVUERBVEVfUEVSTUlTU0lPTl9GQUlMO1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcGF5bG9hZDogeyBwZXJtaXNzaW9uQ29kZTogc3RyaW5nOyBlcnJvcjogYW55IH0pIHtcbiAgICBzdXBlcihQRVJNSVNTSU9OX0VOVElUSUVTLCBwYXlsb2FkLnBlcm1pc3Npb25Db2RlLCBwYXlsb2FkLmVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVXBkYXRlUGVybWlzc2lvblN1Y2Nlc3MgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eVN1Y2Nlc3NBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gVVBEQVRFX1BFUk1JU1NJT05fU1VDQ0VTUztcbiAgY29uc3RydWN0b3IocHVibGljIHBheWxvYWQ6IFBlcm1pc3Npb24pIHtcbiAgICBzdXBlcihQRVJNSVNTSU9OX0VOVElUSUVTLCBwYXlsb2FkLmNvZGUgPz8gJycsIHBheWxvYWQpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMb2FkUGVybWlzc2lvblR5cGVzIGV4dGVuZHMgU3RhdGVVdGlscy5FbnRpdHlMb2FkQWN0aW9uIHtcbiAgcmVhZG9ubHkgdHlwZSA9IExPQURfUEVSTUlTU0lPTl9UWVBFUztcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoUEVSTUlTU0lPTl9UWVBFU19MSVNULCBQRVJNSVNTSU9OX1RZUEVTKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTG9hZFBlcm1pc3Npb25UeXBlc0ZhaWwgZXh0ZW5kcyBTdGF0ZVV0aWxzLkVudGl0eUZhaWxBY3Rpb24ge1xuICByZWFkb25seSB0eXBlID0gTE9BRF9QRVJNSVNTSU9OX1RZUEVTX0ZBSUw7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwYXlsb2FkOiBhbnkpIHtcbiAgICBzdXBlcihQRVJNSVNTSU9OX1RZUEVTX0xJU1QsIFBFUk1JU1NJT05fVFlQRVMsIHBheWxvYWQuZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMb2FkUGVybWlzc2lvblR5cGVzU3VjY2VzcyBleHRlbmRzIFN0YXRlVXRpbHMuRW50aXR5U3VjY2Vzc0FjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBMT0FEX1BFUk1JU1NJT05fVFlQRVNfU1VDQ0VTUztcbiAgY29uc3RydWN0b3IocHVibGljIHBheWxvYWQ6IE9yZGVyQXBwcm92YWxQZXJtaXNzaW9uVHlwZVtdKSB7XG4gICAgc3VwZXIoUEVSTUlTU0lPTl9UWVBFU19MSVNULCBQRVJNSVNTSU9OX1RZUEVTKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBQZXJtaXNzaW9uQWN0aW9uID1cbiAgfCBMb2FkUGVybWlzc2lvblxuICB8IExvYWRQZXJtaXNzaW9uRmFpbFxuICB8IExvYWRQZXJtaXNzaW9uU3VjY2Vzc1xuICB8IExvYWRQZXJtaXNzaW9uc1xuICB8IExvYWRQZXJtaXNzaW9uc0ZhaWxcbiAgfCBMb2FkUGVybWlzc2lvbnNTdWNjZXNzXG4gIHwgQ3JlYXRlUGVybWlzc2lvblxuICB8IENyZWF0ZVBlcm1pc3Npb25GYWlsXG4gIHwgQ3JlYXRlUGVybWlzc2lvblN1Y2Nlc3NcbiAgfCBVcGRhdGVQZXJtaXNzaW9uXG4gIHwgVXBkYXRlUGVybWlzc2lvbkZhaWxcbiAgfCBVcGRhdGVQZXJtaXNzaW9uU3VjY2Vzc1xuICB8IExvYWRQZXJtaXNzaW9uVHlwZXNcbiAgfCBMb2FkUGVybWlzc2lvblR5cGVzRmFpbFxuICB8IExvYWRQZXJtaXNzaW9uVHlwZXNTdWNjZXNzO1xuIl19