/*
 * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { createSelector } from '@ngrx/store';
import { StateUtils, } from '@spartacus/core';
import { ORG_UNIT_APPROVAL_PROCESSES, ORG_UNIT_FEATURE, ORG_UNIT_NODES, ORG_UNIT_TREE, } from '../organization-state';
import { getB2BUsersState } from './b2b-user.selector';
import { getOrganizationState } from './feature.selector';
export const getB2BOrgUnitState = createSelector(getOrganizationState, (state) => state[ORG_UNIT_FEATURE]);
export const getOrgUnitsNodeListState = createSelector(getB2BOrgUnitState, (state) => state && state.availableOrgUnitNodes);
export const getOrgUnitsState = createSelector(getB2BOrgUnitState, (state) => state && state.entities);
export const getOrgUnitsTreeState = createSelector(getB2BOrgUnitState, (state) => state && state.tree);
export const getAddressesState = createSelector(getB2BOrgUnitState, (state) => state && state.addressEntities);
export const getApprovalProcessesState = createSelector(getB2BOrgUnitState, (state) => state && state.approvalProcesses);
export const getOrgUnit = (orgUnitId) => createSelector(getOrgUnitsState, (state) => StateUtils.entityLoaderStateSelector(state, orgUnitId));
export const getOrgUnitValue = (orgUnitId) => {
    return createSelector(getOrgUnit(orgUnitId), (orgUnitState) => StateUtils.loaderValueSelector(orgUnitState));
};
export const getOrgUnitState = (orgUnitId) => createSelector(getOrgUnitsState, (state) => StateUtils.entityLoaderStateSelector(state, orgUnitId));
export const getOrgUnitList = () => createSelector(getOrgUnitsNodeListState, (state) => StateUtils.entityLoaderStateSelector(state, ORG_UNIT_NODES));
export const getOrgUnitTree = () => createSelector(getOrgUnitsTreeState, (state) => StateUtils.entityLoaderStateSelector(state, ORG_UNIT_TREE));
export const getApprovalProcesses = () => createSelector(getApprovalProcessesState, (state) => StateUtils.entityLoaderStateSelector(state, ORG_UNIT_APPROVAL_PROCESSES));
export const getAssignedUsers = (orgUnitId, roleId, params) => createSelector(getB2BOrgUnitState, getB2BUsersState, (state, users) => StateUtils.denormalizeCustomB2BSearch(state.users, users, params, `${orgUnitId},${roleId}`));
export const getB2BAddresses = (orgUnitId, params) => createSelector(getB2BOrgUnitState, (state) => StateUtils.denormalizeCustomB2BSearch(state.addressList, state.addressEntities, params, orgUnitId));
export const getB2BAddress = (addressId) => createSelector(getAddressesState, (state) => StateUtils.entityLoaderStateSelector(state, addressId));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnLXVuaXQuc2VsZWN0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvcmUvc3RvcmUvc2VsZWN0b3JzL29yZy11bml0LnNlbGVjdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFFSCxPQUFPLEVBQUUsY0FBYyxFQUFvQixNQUFNLGFBQWEsQ0FBQztBQUMvRCxPQUFPLEVBT0wsVUFBVSxHQUNYLE1BQU0saUJBQWlCLENBQUM7QUFFekIsT0FBTyxFQUdMLDJCQUEyQixFQUMzQixnQkFBZ0IsRUFDaEIsY0FBYyxFQUNkLGFBQWEsR0FFZCxNQUFNLHVCQUF1QixDQUFDO0FBQy9CLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRTFELE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQUczQixjQUFjLENBQ2hCLG9CQUFvQixFQUNwQixDQUFDLEtBQXdCLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUN0RCxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sd0JBQXdCLEdBR2pDLGNBQWMsQ0FDaEIsa0JBQWtCLEVBQ2xCLENBQUMsS0FBZSxFQUFFLEVBQUUsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLHFCQUFxQixDQUMxRCxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBR3pCLGNBQWMsQ0FDaEIsa0JBQWtCLEVBQ2xCLENBQUMsS0FBZSxFQUFFLEVBQUUsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FDN0MsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG9CQUFvQixHQUc3QixjQUFjLENBQ2hCLGtCQUFrQixFQUNsQixDQUFDLEtBQWUsRUFBRSxFQUFFLENB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RUFBRSxFQUFFLENBQy9DLFVBQVUsQ0FBQyx5QkFBeUIsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQ3pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMiBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvciwgTWVtb2l6ZWRTZWxlY3RvciB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcbmltcG9ydCB7XG4gIEFkZHJlc3MsXG4gIEIyQkFwcHJvdmFsUHJvY2VzcyxcbiAgQjJCVW5pdCxcbiAgQjJCVXNlcixcbiAgRW50aXRpZXNNb2RlbCxcbiAgU2VhcmNoQ29uZmlnLFxuICBTdGF0ZVV0aWxzLFxufSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHsgQjJCVW5pdE5vZGUgfSBmcm9tICcuLi8uLi9tb2RlbC91bml0LW5vZGUubW9kZWwnO1xuaW1wb3J0IHtcbiAgT3JnYW5pemF0aW9uU3RhdGUsXG4gIE9yZ1VuaXRzLFxuICBPUkdfVU5JVF9BUFBST1ZBTF9QUk9DRVNTRVMsXG4gIE9SR19VTklUX0ZFQVRVUkUsXG4gIE9SR19VTklUX05PREVTLFxuICBPUkdfVU5JVF9UUkVFLFxuICBTdGF0ZVdpdGhPcmdhbml6YXRpb24sXG59IGZyb20gJy4uL29yZ2FuaXphdGlvbi1zdGF0ZSc7XG5pbXBvcnQgeyBnZXRCMkJVc2Vyc1N0YXRlIH0gZnJvbSAnLi9iMmItdXNlci5zZWxlY3Rvcic7XG5pbXBvcnQgeyBnZXRPcmdhbml6YXRpb25TdGF0ZSB9IGZyb20gJy4vZmVhdHVyZS5zZWxlY3Rvcic7XG5cbmV4cG9ydCBjb25zdCBnZXRCMkJPcmdVbml0U3RhdGU6IE1lbW9pemVkU2VsZWN0b3I8XG4gIFN0YXRlV2l0aE9yZ2FuaXphdGlvbixcbiAgT3JnVW5pdHNcbj4gPSBjcmVhdGVTZWxlY3RvcihcbiAgZ2V0T3JnYW5pemF0aW9uU3RhdGUsXG4gIChzdGF0ZTogT3JnYW5pemF0aW9uU3RhdGUpID0+IHN0YXRlW09SR19VTklUX0ZFQVRVUkVdXG4pO1xuXG5leHBvcnQgY29uc3QgZ2V0T3JnVW5pdHNOb2RlTGlzdFN0YXRlOiBNZW1vaXplZFNlbGVjdG9yPFxuICBTdGF0ZVdpdGhPcmdhbml6YXRpb24sXG4gIFN0YXRlVXRpbHMuRW50aXR5TG9hZGVyU3RhdGU8QjJCVW5pdE5vZGVbXT5cbj4gPSBjcmVhdGVTZWxlY3RvcihcbiAgZ2V0QjJCT3JnVW5pdFN0YXRlLFxuICAoc3RhdGU6IE9yZ1VuaXRzKSA9PiBzdGF0ZSAmJiBzdGF0ZS5hdmFpbGFibGVPcmdVbml0Tm9kZXNcbik7XG5cbmV4cG9ydCBjb25zdCBnZXRPcmdVbml0c1N0YXRlOiBNZW1vaXplZFNlbGVjdG9yPFxuICBTdGF0ZVdpdGhPcmdhbml6YXRpb24sXG4gIFN0YXRlVXRpbHMuRW50aXR5TG9hZGVyU3RhdGU8QjJCVW5pdE5vZGU+XG4+ID0gY3JlYXRlU2VsZWN0b3IoXG4gIGdldEIyQk9yZ1VuaXRTdGF0ZSxcbiAgKHN0YXRlOiBPcmdVbml0cykgPT4gc3RhdGUgJiYgc3RhdGUuZW50aXRpZXNcbik7XG5cbmV4cG9ydCBjb25zdCBnZXRPcmdVbml0c1RyZWVTdGF0ZTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkVudGl0eUxvYWRlclN0YXRlPEIyQlVuaXROb2RlPlxuPiA9IGNyZWF0ZVNlbGVjdG9yKFxuICBnZXRCMkJPcmdVbml0U3RhdGUsXG4gIChzdGF0ZTogT3JnVW5pdHMpID0+IHN0YXRlICYmIHN0YXRlLnRyZWVcbik7XG5cbmV4cG9ydCBjb25zdCBnZXRBZGRyZXNzZXNTdGF0ZTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkVudGl0eUxvYWRlclN0YXRlPEFkZHJlc3M+XG4+ID0gY3JlYXRlU2VsZWN0b3IoXG4gIGdldEIyQk9yZ1VuaXRTdGF0ZSxcbiAgKHN0YXRlOiBPcmdVbml0cykgPT4gc3RhdGUgJiYgc3RhdGUuYWRkcmVzc0VudGl0aWVzXG4pO1xuXG5leHBvcnQgY29uc3QgZ2V0QXBwcm92YWxQcm9jZXNzZXNTdGF0ZTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkVudGl0eUxvYWRlclN0YXRlPEIyQkFwcHJvdmFsUHJvY2Vzc1tdPlxuPiA9IGNyZWF0ZVNlbGVjdG9yKFxuICBnZXRCMkJPcmdVbml0U3RhdGUsXG4gIChzdGF0ZTogT3JnVW5pdHMpID0+IHN0YXRlICYmIHN0YXRlLmFwcHJvdmFsUHJvY2Vzc2VzXG4pO1xuXG5leHBvcnQgY29uc3QgZ2V0T3JnVW5pdCA9IChcbiAgb3JnVW5pdElkOiBzdHJpbmdcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoT3JnYW5pemF0aW9uLCBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPEIyQlVuaXQ+PiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRPcmdVbml0c1N0YXRlLFxuICAgIChzdGF0ZTogU3RhdGVVdGlscy5FbnRpdHlMb2FkZXJTdGF0ZTxCMkJVbml0PikgPT5cbiAgICAgIFN0YXRlVXRpbHMuZW50aXR5TG9hZGVyU3RhdGVTZWxlY3RvcihzdGF0ZSwgb3JnVW5pdElkKVxuICApO1xuXG5leHBvcnQgY29uc3QgZ2V0T3JnVW5pdFZhbHVlID0gKFxuICBvcmdVbml0SWQ6IHN0cmluZ1xuKTogTWVtb2l6ZWRTZWxlY3RvcjxTdGF0ZVdpdGhPcmdhbml6YXRpb24sIEIyQlVuaXQ+ID0+IHtcbiAgcmV0dXJuIGNyZWF0ZVNlbGVjdG9yKGdldE9yZ1VuaXQob3JnVW5pdElkKSwgKG9yZ1VuaXRTdGF0ZSkgPT5cbiAgICBTdGF0ZVV0aWxzLmxvYWRlclZhbHVlU2VsZWN0b3Iob3JnVW5pdFN0YXRlKVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldE9yZ1VuaXRTdGF0ZSA9IChcbiAgb3JnVW5pdElkOiBzdHJpbmdcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoT3JnYW5pemF0aW9uLCBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPEIyQlVuaXQ+PiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRPcmdVbml0c1N0YXRlLFxuICAgIChzdGF0ZTogU3RhdGVVdGlscy5FbnRpdHlMb2FkZXJTdGF0ZTxCMkJVbml0PikgPT5cbiAgICAgIFN0YXRlVXRpbHMuZW50aXR5TG9hZGVyU3RhdGVTZWxlY3RvcihzdGF0ZSwgb3JnVW5pdElkKVxuICApO1xuXG5leHBvcnQgY29uc3QgZ2V0T3JnVW5pdExpc3QgPSAoKTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPEIyQlVuaXROb2RlW10+XG4+ID0+XG4gIGNyZWF0ZVNlbGVjdG9yKFxuICAgIGdldE9yZ1VuaXRzTm9kZUxpc3RTdGF0ZSxcbiAgICAoc3RhdGU6IFN0YXRlVXRpbHMuRW50aXR5TG9hZGVyU3RhdGU8QjJCVW5pdE5vZGVbXT4pID0+XG4gICAgICBTdGF0ZVV0aWxzLmVudGl0eUxvYWRlclN0YXRlU2VsZWN0b3Ioc3RhdGUsIE9SR19VTklUX05PREVTKVxuICApO1xuXG5leHBvcnQgY29uc3QgZ2V0T3JnVW5pdFRyZWUgPSAoKTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPEIyQlVuaXROb2RlPlxuPiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRPcmdVbml0c1RyZWVTdGF0ZSxcbiAgICAoc3RhdGU6IFN0YXRlVXRpbHMuRW50aXR5TG9hZGVyU3RhdGU8QjJCVW5pdE5vZGU+KSA9PlxuICAgICAgU3RhdGVVdGlscy5lbnRpdHlMb2FkZXJTdGF0ZVNlbGVjdG9yKHN0YXRlLCBPUkdfVU5JVF9UUkVFKVxuICApO1xuXG5leHBvcnQgY29uc3QgZ2V0QXBwcm92YWxQcm9jZXNzZXMgPSAoKTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPEIyQkFwcHJvdmFsUHJvY2Vzc1tdPlxuPiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRBcHByb3ZhbFByb2Nlc3Nlc1N0YXRlLFxuICAgIChzdGF0ZTogU3RhdGVVdGlscy5FbnRpdHlMb2FkZXJTdGF0ZTxCMkJBcHByb3ZhbFByb2Nlc3NbXT4pID0+XG4gICAgICBTdGF0ZVV0aWxzLmVudGl0eUxvYWRlclN0YXRlU2VsZWN0b3Ioc3RhdGUsIE9SR19VTklUX0FQUFJPVkFMX1BST0NFU1NFUylcbiAgKTtcblxuZXhwb3J0IGNvbnN0IGdldEFzc2lnbmVkVXNlcnMgPSAoXG4gIG9yZ1VuaXRJZDogc3RyaW5nLFxuICByb2xlSWQ6IHN0cmluZyxcbiAgcGFyYW1zOiBTZWFyY2hDb25maWdcbik6IE1lbW9pemVkU2VsZWN0b3I8XG4gIFN0YXRlV2l0aE9yZ2FuaXphdGlvbixcbiAgU3RhdGVVdGlscy5Mb2FkZXJTdGF0ZTxFbnRpdGllc01vZGVsPEIyQlVzZXI+PlxuPiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRCMkJPcmdVbml0U3RhdGUsXG4gICAgZ2V0QjJCVXNlcnNTdGF0ZSxcbiAgICAoc3RhdGU6IE9yZ1VuaXRzLCB1c2VyczogU3RhdGVVdGlscy5FbnRpdHlMb2FkZXJTdGF0ZTxCMkJVc2VyPikgPT5cbiAgICAgIFN0YXRlVXRpbHMuZGVub3JtYWxpemVDdXN0b21CMkJTZWFyY2goXG4gICAgICAgIHN0YXRlLnVzZXJzLFxuICAgICAgICB1c2VycyxcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBgJHtvcmdVbml0SWR9LCR7cm9sZUlkfWBcbiAgICAgIClcbiAgKTtcblxuZXhwb3J0IGNvbnN0IGdldEIyQkFkZHJlc3NlcyA9IChcbiAgb3JnVW5pdElkOiBzdHJpbmcsXG4gIHBhcmFtcz86IFNlYXJjaENvbmZpZ1xuKTogTWVtb2l6ZWRTZWxlY3RvcjxcbiAgU3RhdGVXaXRoT3JnYW5pemF0aW9uLFxuICBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPEVudGl0aWVzTW9kZWw8QWRkcmVzcz4+XG4+ID0+XG4gIGNyZWF0ZVNlbGVjdG9yKGdldEIyQk9yZ1VuaXRTdGF0ZSwgKHN0YXRlOiBPcmdVbml0cykgPT5cbiAgICBTdGF0ZVV0aWxzLmRlbm9ybWFsaXplQ3VzdG9tQjJCU2VhcmNoKFxuICAgICAgc3RhdGUuYWRkcmVzc0xpc3QsXG4gICAgICBzdGF0ZS5hZGRyZXNzRW50aXRpZXMsXG4gICAgICBwYXJhbXMsXG4gICAgICBvcmdVbml0SWRcbiAgICApXG4gICk7XG5cbmV4cG9ydCBjb25zdCBnZXRCMkJBZGRyZXNzID0gKFxuICBhZGRyZXNzSWQ6IHN0cmluZ1xuKTogTWVtb2l6ZWRTZWxlY3RvcjxTdGF0ZVdpdGhPcmdhbml6YXRpb24sIFN0YXRlVXRpbHMuTG9hZGVyU3RhdGU8QWRkcmVzcz4+ID0+XG4gIGNyZWF0ZVNlbGVjdG9yKFxuICAgIGdldEFkZHJlc3Nlc1N0YXRlLFxuICAgIChzdGF0ZTogU3RhdGVVdGlscy5FbnRpdHlMb2FkZXJTdGF0ZTxBZGRyZXNzPikgPT5cbiAgICAgIFN0YXRlVXRpbHMuZW50aXR5TG9hZGVyU3RhdGVTZWxlY3RvcihzdGF0ZSwgYWRkcmVzc0lkKVxuICApO1xuIl19