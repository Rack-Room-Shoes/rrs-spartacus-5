/*
 * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { InjectionToken } from '@angular/core';
import { combineReducers, } from '@ngrx/store';
import { AuthActions, StateUtils } from '@spartacus/core';
import { ORDER_APPROVAL_ENTITIES, ORDER_APPROVAL_FEATURE, ORDER_APPROVAL_LIST, } from '../order-approval-state';
import { orderApprovalsEntitiesReducer, orderApprovalsListReducer, } from './order-approval.reducer';
export function getReducers() {
    return {
        [ORDER_APPROVAL_FEATURE]: combineReducers({
            entities: StateUtils.entityLoaderReducer(ORDER_APPROVAL_ENTITIES, orderApprovalsEntitiesReducer),
            list: StateUtils.entityLoaderReducer(ORDER_APPROVAL_LIST, orderApprovalsListReducer),
        }),
    };
}
export const reducerToken = new InjectionToken('OrganizationReducers');
export const reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearOrganizationState(reducer) {
    return function (state, action) {
        if (action.type === AuthActions.LOGOUT) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const metaReducers = [clearOrganizationState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL29yZGVyLWFwcHJvdmFsL2NvcmUvc3RvcmUvcmVkdWNlcnMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSxjQUFjLEVBQVksTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUlMLGVBQWUsR0FFaEIsTUFBTSxhQUFhLENBQUM7QUFDckIsT0FBTyxFQUFFLFdBQVcsRUFBYSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVyRSxPQUFPLEVBRUwsdUJBQXVCLEVBQ3ZCLHNCQUFzQixFQUN0QixtQkFBbUIsR0FDcEIsTUFBTSx5QkFBeUIsQ0FBQztBQUNqQyxPQUFPLEVBQ0wsNkJBQTZCLEVBQzdCLHlCQUF5QixHQUMxQixNQUFNLDBCQUEwQixDQUFDO0FBRWxDLE1BQU0sVUFBVSxXQUFXO0lBQ3pCLE9BQU87UUFDTCxDQUFDLHNCQUFzQixDQUFDLEVBQUUsZUFBZSxDQUFDO1lBQ3hDLFFBQVEsRUFBRSxVQUFVLENBQUMsbUJBQW1CLENBQ3RDLHVCQUF1QixFQUN2Qiw2QkFBNkIsQ0FDOUI7WUFDRCxJQUFJLEVBQUUsVUFBVSxDQUFDLG1CQUFtQixDQUNsQyxtQkFBbUIsRUFDbkIseUJBQXlCLENBQzFCO1NBQ0YsQ0FBQztLQUNILENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUVyQixJQUFJLGNBQWMsQ0FDcEIsc0JBQXNCLENBQ3ZCLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxlQUFlLEdBQWE7SUFDdkMsT0FBTyxFQUFFLFlBQVk7SUFDckIsVUFBVSxFQUFFLFdBQVc7Q0FDeEIsQ0FBQztBQUVGLE1BQU0sVUFBVSxzQkFBc0IsQ0FDcEMsT0FBa0Q7SUFFbEQsT0FBTyxVQUFVLEtBQUssRUFBRSxNQUFNO1FBQzVCLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxXQUFXLENBQUMsTUFBTSxFQUFFO1lBQ3RDLEtBQUssR0FBRyxTQUFTLENBQUM7U0FDbkI7UUFFRCxPQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBdUIsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjIgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4sIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBBY3Rpb24sXG4gIEFjdGlvblJlZHVjZXIsXG4gIEFjdGlvblJlZHVjZXJNYXAsXG4gIGNvbWJpbmVSZWR1Y2VycyxcbiAgTWV0YVJlZHVjZXIsXG59IGZyb20gJ0BuZ3J4L3N0b3JlJztcbmltcG9ydCB7IEF1dGhBY3Rpb25zLCBMaXN0TW9kZWwsIFN0YXRlVXRpbHMgfSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHsgT3JkZXJBcHByb3ZhbCB9IGZyb20gJy4uLy4uL21vZGVsL29yZGVyLWFwcHJvdmFsLm1vZGVsJztcbmltcG9ydCB7XG4gIE9yZGVyQXBwcm92YWxTdGF0ZSxcbiAgT1JERVJfQVBQUk9WQUxfRU5USVRJRVMsXG4gIE9SREVSX0FQUFJPVkFMX0ZFQVRVUkUsXG4gIE9SREVSX0FQUFJPVkFMX0xJU1QsXG59IGZyb20gJy4uL29yZGVyLWFwcHJvdmFsLXN0YXRlJztcbmltcG9ydCB7XG4gIG9yZGVyQXBwcm92YWxzRW50aXRpZXNSZWR1Y2VyLFxuICBvcmRlckFwcHJvdmFsc0xpc3RSZWR1Y2VyLFxufSBmcm9tICcuL29yZGVyLWFwcHJvdmFsLnJlZHVjZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVkdWNlcnMoKTogQWN0aW9uUmVkdWNlck1hcDxPcmRlckFwcHJvdmFsU3RhdGU+IHtcbiAgcmV0dXJuIHtcbiAgICBbT1JERVJfQVBQUk9WQUxfRkVBVFVSRV06IGNvbWJpbmVSZWR1Y2Vycyh7XG4gICAgICBlbnRpdGllczogU3RhdGVVdGlscy5lbnRpdHlMb2FkZXJSZWR1Y2VyPE9yZGVyQXBwcm92YWw+KFxuICAgICAgICBPUkRFUl9BUFBST1ZBTF9FTlRJVElFUyxcbiAgICAgICAgb3JkZXJBcHByb3ZhbHNFbnRpdGllc1JlZHVjZXJcbiAgICAgICksXG4gICAgICBsaXN0OiBTdGF0ZVV0aWxzLmVudGl0eUxvYWRlclJlZHVjZXI8TGlzdE1vZGVsLCBhbnk+KFxuICAgICAgICBPUkRFUl9BUFBST1ZBTF9MSVNULFxuICAgICAgICBvcmRlckFwcHJvdmFsc0xpc3RSZWR1Y2VyXG4gICAgICApLFxuICAgIH0pLFxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgcmVkdWNlclRva2VuOiBJbmplY3Rpb25Ub2tlbjxcbiAgQWN0aW9uUmVkdWNlck1hcDxPcmRlckFwcHJvdmFsU3RhdGU+XG4+ID0gbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8T3JkZXJBcHByb3ZhbFN0YXRlPj4oXG4gICdPcmdhbml6YXRpb25SZWR1Y2Vycydcbik7XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyUHJvdmlkZXI6IFByb3ZpZGVyID0ge1xuICBwcm92aWRlOiByZWR1Y2VyVG9rZW4sXG4gIHVzZUZhY3Rvcnk6IGdldFJlZHVjZXJzLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT3JnYW5pemF0aW9uU3RhdGUoXG4gIHJlZHVjZXI6IEFjdGlvblJlZHVjZXI8T3JkZXJBcHByb3ZhbFN0YXRlLCBBY3Rpb24+XG4pOiBBY3Rpb25SZWR1Y2VyPE9yZGVyQXBwcm92YWxTdGF0ZSwgQWN0aW9uPiB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gQXV0aEFjdGlvbnMuTE9HT1VUKSB7XG4gICAgICBzdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IG1ldGFSZWR1Y2VyczogTWV0YVJlZHVjZXI8YW55PltdID0gW2NsZWFyT3JnYW5pemF0aW9uU3RhdGVdO1xuIl19